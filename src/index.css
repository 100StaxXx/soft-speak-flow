@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== iOS-STYLE ULTRA GLASS UTILITIES ===== */

/* Maximum transparency glass - for hero cards */
.glass-ios-ultra {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.03),
    rgba(255, 255, 255, 0.01)
  );
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

/* Elevated glass with more presence */
.glass-ios-elevated {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.02)
  );
  backdrop-filter: blur(32px) saturate(200%);
  -webkit-backdrop-filter: blur(32px) saturate(200%);
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 
    0 12px 40px rgba(0, 0, 0, 0.2),
    0 2px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Rainbow slide animation for evolve button */
@keyframes rainbow-slide {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}

/* Sparkle animations for evolve button */
@keyframes evolve-sparkle {
  0%, 100% {
    opacity: 0;
    transform: scale(0);
  }
  50% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-sparkle-1 {
  animation: evolve-sparkle 1.5s ease-in-out infinite;
  animation-delay: 0s;
}
.animate-sparkle-2 {
  animation: evolve-sparkle 1.8s ease-in-out infinite;
  animation-delay: 0.3s;
}
.animate-sparkle-3 {
  animation: evolve-sparkle 1.4s ease-in-out infinite;
  animation-delay: 0.6s;
}
.animate-sparkle-4 {
  animation: evolve-sparkle 2s ease-in-out infinite;
  animation-delay: 0.9s;
}
.animate-sparkle-5 {
  animation: evolve-sparkle 1.6s ease-in-out infinite;
  animation-delay: 1.2s;
}

/* Subtle shimmer animation */
@keyframes glass-shimmer {
  0%, 100% { 
    background-position: 0% 50%; 
  }
  50% { 
    background-position: 100% 50%; 
  }
}

.glass-shimmer::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.03),
    transparent
  );
  background-size: 200% 100%;
  animation: glass-shimmer 4s ease-in-out infinite;
  pointer-events: none;
  border-radius: inherit;
}

/* Parallax-ready card base */
.parallax-glass-card {
  @apply rounded-2xl border transition-all duration-300;
  background: linear-gradient(
    135deg,
    hsl(var(--card) / 0.25),
    hsl(var(--card) / 0.15)
  );
  backdrop-filter: blur(20px) saturate(150%);
  -webkit-backdrop-filter: blur(20px) saturate(150%);
  border: 1px solid hsl(var(--cosmiq-glow) / 0.15);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 hsl(var(--pure-white) / 0.08);
}

/* ============================================
   STELLAR BEATS ENHANCED ANIMATIONS
   ============================================ */

/* Floating ambient particles */
@keyframes stellar-float {
  0%, 100% {
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.4;
  }
  25% {
    transform: translateY(-20px) translateX(10px) scale(1.1);
    opacity: 0.7;
  }
  50% {
    transform: translateY(-10px) translateX(-5px) scale(0.9);
    opacity: 0.5;
  }
  75% {
    transform: translateY(-25px) translateX(5px) scale(1.05);
    opacity: 0.6;
  }
}

.animate-stellar-float {
  animation: stellar-float 6s ease-in-out infinite;
}

/* Note orb pulsing */
@keyframes stellar-orb-pulse {
  0%, 100% {
    filter: brightness(1);
  }
  50% {
    filter: brightness(1.2);
  }
}

.animate-stellar-orb-pulse {
  animation: stellar-orb-pulse 0.8s ease-in-out infinite;
}

/* Particle burst on hit */
@keyframes stellar-particle-burst {
  0% {
    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateY(0);
    opacity: 1;
    scale: 1;
  }
  100% {
    transform: translate(-50%, -50%) rotate(var(--particle-angle)) translateY(calc(var(--particle-distance) * -1));
    opacity: 0;
    scale: 0.3;
  }
}

.animate-stellar-particle-burst {
  animation: stellar-particle-burst 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Ring burst effect */
@keyframes stellar-ring-burst {
  0% {
    transform: scale(0.5);
    opacity: 1;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.animate-stellar-ring-burst {
  animation: stellar-ring-burst 0.4s ease-out forwards;
}

/* Hit text animation */
@keyframes stellar-hit-text {
  0% {
    transform: translateY(0) scale(0.5);
    opacity: 0;
  }
  20% {
    transform: translateY(-10px) scale(1.2);
    opacity: 1;
  }
  40% {
    transform: translateY(-20px) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-50px) scale(0.8);
    opacity: 0;
  }
}

.animate-stellar-hit-text {
  animation: stellar-hit-text 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Perfect hit flash */
@keyframes stellar-perfect-flash {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0.8;
  }
  100% {
    transform: translate(-50%, -50%) scale(3);
    opacity: 0;
  }
}

.animate-stellar-perfect-flash {
  animation: stellar-perfect-flash 0.4s ease-out forwards;
}

/* Screen flash effect */
@keyframes stellar-screen-flash {
  0% {
    opacity: 0.6;
  }
  100% {
    opacity: 0;
  }
}

.animate-stellar-screen-flash {
  animation: stellar-screen-flash 0.15s ease-out forwards;
}

/* Button press ripple */
@keyframes stellar-ripple {
  0% {
    transform: scale(0.8);
    opacity: 0.6;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
}

.animate-stellar-ripple {
  animation: stellar-ripple 0.3s ease-out forwards;
}

/* Legacy hit-pop animation (keeping for backwards compatibility) */
@keyframes hit-pop {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-30px) scale(0.8);
  }
}

.animate-hit-pop {
  animation: hit-pop 0.5s ease-out forwards;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

@keyframes bounce-slow {
  0%, 100% {
    transform: translateY(-5%);
    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
  }
  50% {
    transform: translateY(0);
    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
  }
}

@keyframes bounceRight {
  0%, 100% {
    transform: translateX(0) translateY(-50%);
  }
  50% {
    transform: translateX(8px) translateY(-50%);
  }
}

@keyframes bounceDown {
  0%, 100% {
    transform: translateY(0) translateX(-50%);
  }
  50% {
    transform: translateY(8px) translateX(-50%);
  }
}

@keyframes clickHerePulse {
  0%, 100% {
    opacity: 0.8;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

/* Shimmer sweep animation for banners/CTAs */
@keyframes shimmer-sweep {
  0% {
    transform: translateX(-100%) skewX(-12deg);
  }
  100% {
    transform: translateX(200%) skewX(-12deg);
  }
}

/* Animated strikethrough - sweeps left to right */
@keyframes strikethrough-sweep {
  0% {
    width: 0%;
  }
  100% {
    width: 100%;
  }
}

.animate-strikethrough {
  position: relative;
  text-decoration: none !important;
}

.animate-strikethrough::after {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  height: 2px;
  width: 100%;
  background: currentColor;
  transform: translateY(-50%);
  animation: strikethrough-sweep 0.4s ease-out forwards;
}

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Cosmiq - Cosmiq Design System */
    
    /* Core Brand Colors - Deep Space Palette */
    --obsidian: 0 0% 5%;
    --midnight: 240 10% 10%;
    --charcoal: 240 8% 18%;
    --steel: 240 5% 70%;
    --pure-white: 0 0% 100%;
    --graphite: 240 8% 14%;
    --royal-purple: 270 70% 55%;
    --deep-purple: 270 60% 40%;
    --accent-purple: 280 80% 65%;
    --electric-purple: 280 90% 70%;
    --neon-glow: 270 100% 75%;
    
    /* Cosmiq Color Additions */
    --nebula-pink: 330 70% 55%;
    --celestial-blue: 210 80% 50%;
    --stardust-gold: 45 100% 65%;
    --deep-space: 240 15% 8%;
    --cosmiq-glow: 270 80% 65%;
    
    /* Primary RGB for effects - ONLY use in rgba() contexts */
    --primary-rgb: 167, 108, 255;
    
    /* Quest Category Colors - Mind/Body/Soul */
    --category-mind: 270 80% 60%;      /* purple-indigo */
    --category-body: 20 90% 55%;       /* orange-red */
    --category-soul: 200 80% 55%;      /* blue-cyan */
    
    /* Epic Theme Colors */
    --epic-heroic: 270 70% 55%;        /* purple (default) */
    --epic-warrior: 0 85% 60%;         /* red-orange */
    --epic-mystic: 230 70% 55%;        /* indigo-blue */
    --epic-nature: 145 70% 50%;        /* green-emerald */
    --epic-solar: 45 95% 55%;          /* gold-yellow */
    
    /* Streak Milestone Colors */
    --streak-building: 142 76% 50%;    /* green (7-13 days) */
    --streak-strong: 217 91% 60%;      /* blue (14-29 days) */
    --streak-elite: 270 80% 60%;       /* purple (30-59 days) */
    --streak-legendary: 45 100% 55%;   /* gold (60+ days) */
    
    /* Evolution Stage Tier Overlays */
    --stage-tier-2: 0 0% 75%;          /* silver shimmer (6-10) */
    --stage-tier-3: 45 100% 60%;       /* gold shimmer (11-15) */
    --stage-tier-4-start: 270 80% 60%; /* prismatic start (16-20) */
    --stage-tier-4-mid: 330 80% 60%;   /* prismatic mid */
    --stage-tier-4-end: 190 80% 60%;   /* prismatic end */
    
    /* Semantic Tokens */
    --background: 0 0% 5%;
    --foreground: 0 0% 98%;

    --card: 240 8% 14%;
    --card-foreground: 0 0% 98%;

    --popover: 240 8% 14%;
    --popover-foreground: 0 0% 98%;

    --primary: 270 70% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 240 8% 18%;
    --secondary-foreground: 0 0% 98%;

    --muted: 240 6% 22%;
    --muted-foreground: 240 5% 70%;

    --accent: 280 80% 65%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 100%;

    --border: 240 10% 20%;
    --input: 240 8% 18%;
    --ring: 270 70% 55%;

    --radius: 1.25rem;
    
    /* Enhanced Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(var(--royal-purple)), hsl(var(--electric-purple)));
    --gradient-secondary: linear-gradient(135deg, hsl(var(--deep-purple)), hsl(var(--accent-purple)));
    --gradient-subtle: linear-gradient(180deg, hsl(var(--graphite)), hsl(var(--obsidian)));
    --gradient-depth: linear-gradient(135deg, hsl(var(--deep-purple)), hsl(var(--midnight)));
    --gradient-shimmer: linear-gradient(90deg, transparent, hsl(var(--royal-purple) / 0.2), transparent);
    --gradient-glow: linear-gradient(135deg, hsl(var(--neon-glow) / 0.3), hsl(var(--royal-purple) / 0.2));
    --gradient-card: linear-gradient(135deg, hsl(var(--card)), hsl(var(--secondary)));
    
    /* Enhanced Shadows */
    --shadow-soft: 0 2px 12px hsl(0 0% 0% / 0.4);
    --shadow-medium: 0 4px 20px hsl(0 0% 0% / 0.5);
    --shadow-hard: 0 8px 32px hsl(0 0% 0% / 0.6);
    --shadow-glow: 0 0 30px hsl(var(--royal-purple) / 0.6), 0 0 60px hsl(var(--royal-purple) / 0.3);
    --shadow-glow-lg: 0 0 40px hsl(var(--royal-purple) / 0.7), 0 0 80px hsl(var(--royal-purple) / 0.4);
    --shadow-neon: 0 0 20px hsl(var(--neon-glow) / 0.8), 0 0 40px hsl(var(--neon-glow) / 0.5);
    
    /* Transitions */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-spring: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Spacing Scale - Increased for breathing room */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.75rem; /* +0.25rem */
    --space-xl: 2.5rem;  /* +0.5rem */
    --space-2xl: 3.5rem; /* +0.5rem */
    --space-3xl: 5rem;   /* new */
    
    /* Mentor Personality Colors */
    --mentor-warmth: 30 100% 60%;      /* warm orange */
    --mentor-discipline: 270 80% 30%;   /* dark purple */
    --mentor-energy: 20 100% 55%;      /* vibrant orange */
    --mentor-calm: 180 50% 50%;        /* teal */
    --mentor-wisdom: 280 60% 50%;      /* purple */
    --mentor-fierce: 0 90% 45%;        /* red */
    --mentor-gentle: 150 40% 60%;      /* soft green */
    --mentor-bold: 340 80% 50%;        /* magenta */
    --mentor-serene: 200 60% 55%;      /* blue */
  }
  
  .dark {
    --background: 0 0% 7%;
    --foreground: 0 0% 100%;
    
    --card: 240 6% 15%;
    --card-foreground: 0 0% 100%;
    
    --popover: 240 6% 15%;
    --popover-foreground: 0 0% 100%;
    
    --primary: 270 60% 50%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 240 6% 20%;
    --secondary-foreground: 0 0% 100%;
    
    --muted: 240 6% 25%;
    --muted-foreground: 240 5% 65%;
    
    --accent: 270 50% 35%;
    --accent-foreground: 0 0% 100%;
    
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    
    --border: 240 6% 25%;
    --input: 240 6% 25%;
    --ring: 270 60% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
    /* Prevent text selection app-wide for mobile experience */
    -webkit-user-select: none !important;
    user-select: none !important;
    -webkit-touch-callout: none !important;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Barlow', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
    
  /* Allow text selection ONLY in input fields */
  input, textarea, [contenteditable="true"] {
    -webkit-user-select: text !important;
    user-select: text !important;
    -webkit-touch-callout: default !important;
  }

    html.walkthrough-scroll-locked,
    body.walkthrough-scroll-locked {
      overflow: hidden;
      height: 100%;
      touch-action: none;
      overscroll-behavior: none;
    }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Bebas Neue', 'Oswald', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    letter-spacing: 0.02em;
  }

  /* Prevent text selection on interactive elements (iOS) */
  .no-text-select {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* 3D flip utilities */
  .preserve-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }

  .perspective-1000 {
    perspective: 1000px;
  }
  
  /* Theme transition effect */
  .theme-transition * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
  }
  
  /* Cinematic slide-in animation for onboarding */
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
  /* Sharp borders variant */
  .sharp-borders * {
    border-radius: 0.25rem !important;
  }
  
  .sharp-borders .rounded-lg {
    border-radius: 0.25rem !important;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* iOS Touch Optimizations */
  .ios-scroll-container {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Prevent rubber-banding on iOS for modals/dialogs */
  [data-radix-dialog-content],
  [data-vaul-drawer] {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
  }

  /* iOS Safe Area padding utilities */
  .pt-safe {
    padding-top: calc(1.5rem + env(safe-area-inset-top, 0px));
  }
  
  .pt-safe-lg {
    padding-top: calc(2.5rem + env(safe-area-inset-top, 0px));
  }

  /* Better touch targets for iOS inputs */
  input, textarea, select {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Swipeable elements - allow horizontal swipe only */
  .swipe-horizontal {
    touch-action: pan-y pinch-zoom;
  }

  /* Haptic Feedback Utility */
  .haptic-press {
    transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .haptic-press:active {
    transform: scale(0.97);
  }

  /* Skeleton Pulse */
  @keyframes skeleton-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Pokemon TCG Pocket Style Animations */
  @keyframes gradient-shift {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes gradient-text {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes float-slow {
    0%, 100% {
      transform: translate(0, 0);
      opacity: 0.6;
    }
    50% {
      transform: translate(10px, -20px);
      opacity: 1;
    }
  }

  @keyframes float-medium {
    0%, 100% {
      transform: translate(0, 0);
      opacity: 0.5;
    }
    50% {
      transform: translate(-15px, -15px);
      opacity: 0.9;
    }
  }

  @keyframes float-fast {
    0%, 100% {
      transform: translate(0, 0);
      opacity: 0.4;
    }
    50% {
      transform: translate(15px, 15px);
      opacity: 0.8;
    }
  }

  @keyframes sparkle {
    0%, 100% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    50% {
      opacity: 1;
      transform: scale(1.5) rotate(180deg);
    }
  }

  /* ===== PREMIUM EVOLUTION ANIMATION SYSTEM ===== */
  
  /* Single impact pulse - replaces triple shake */
  @keyframes evolution-pulse-hit {
    0% { transform: scale(1) translateZ(0); filter: brightness(1); }
    30% { transform: scale(1.03) translateZ(0); filter: brightness(1.3); }
    100% { transform: scale(1) translateZ(0); filter: brightness(1); }
  }
  
  .animate-evolution-pulse-hit {
    animation: evolution-pulse-hit 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Theme-aware glow background */
  .evo-glow {
    background: radial-gradient(
      circle at 50% 50%,
      hsl(var(--evo-glow-a, 270 70% 55%) / 0.25) 0%,
      hsl(var(--evo-glow-b, 280 80% 65%) / 0.15) 40%,
      transparent 70%
    );
  }

  /* Crack line drawing animation for hatching */
  .evo-crack-path {
    stroke-dasharray: 400;
    stroke-dashoffset: 400;
  }
  
  .evo-crack-path.drawing {
    animation: crack-draw 0.9s ease forwards;
  }
  
  .evo-crack-path.drawing.delay-100 {
    animation-delay: 0.1s;
  }
  
  .evo-crack-path.drawing.delay-150 {
    animation-delay: 0.15s;
  }
  
  @keyframes crack-draw {
    to { stroke-dashoffset: 0; }
  }

  /* Light seam flash for hatching impact */
  .evo-seam-flash {
    animation: seam-flash 0.5s ease-out forwards;
  }
  
  @keyframes seam-flash {
    0% { opacity: 0; transform: translateX(-50%) translateY(-50%) scaleX(0.2); filter: blur(8px); }
    40% { opacity: 1; transform: translateX(-50%) translateY(-50%) scaleX(1); filter: blur(2px); }
    100% { opacity: 0; transform: translateX(-50%) translateY(-50%) scaleX(1.2); filter: blur(12px); }
  }

  /* ===== THEME-AWARE PARTICLE STYLES ===== */
  
  /* Base particle style */
  .evo-particle {
    background: radial-gradient(circle, hsl(var(--primary)) 40%, hsl(var(--accent)) 100%);
    border-radius: 50%;
    box-shadow: 0 0 8px hsl(var(--primary) / 0.6);
  }

  /* Embers (Fire) - flickering orange-red */
  .evo-particle-embers {
    background: linear-gradient(135deg, hsl(25 100% 55%), hsl(15 90% 50%));
    border-radius: 2px;
    box-shadow: 0 0 12px hsl(20 100% 50% / 0.6);
  }

  /* Bubbles (Water) - translucent blue spheres */
  .evo-particle-bubbles {
    background: radial-gradient(circle at 30% 30%, hsl(195 90% 70% / 0.8), hsl(200 85% 55% / 0.4));
    border: 1px solid hsl(0 0% 100% / 0.3);
    border-radius: 50%;
    box-shadow: inset 0 0 8px hsl(0 0% 100% / 0.2);
  }

  /* Stardust (Air/Light/Ice/Cosmic) - glowing white stars */
  .evo-particle-stardust {
    background: radial-gradient(circle, hsl(0 0% 100%) 30%, hsl(0 0% 100% / 0.5) 60%, transparent);
    border-radius: 50%;
    box-shadow: 0 0 10px hsl(0 0% 100% / 0.8), 0 0 20px hsl(var(--primary) / 0.4);
  }

  /* Sparks (Lightning/Shadow) - sharp electric flickers */
  .evo-particle-sparks {
    background: linear-gradient(to bottom, hsl(50 100% 60%), hsl(35 100% 50%));
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
    box-shadow: 0 0 8px hsl(50 100% 60% / 0.7);
  }

  /* Leaves (Earth/Nature) - organic green shapes */
  .evo-particle-leaves {
    background: linear-gradient(135deg, hsl(100 50% 50%), hsl(120 45% 40%));
    border-radius: 0 50% 50% 50%;
    transform: rotate(45deg);
    box-shadow: 0 0 6px hsl(100 50% 40% / 0.4);
  }

  /* Legacy evolution animations - keep for backwards compatibility */
  @keyframes evolution-pulse {
    0%, 100% {
      transform: scale(1) translateZ(0);
      opacity: 0.3;
    }
    50% {
      transform: scale(1.15) translateZ(0);
      opacity: 0.6;
    }
  }
  
  .animate-evolution-pulse {
    animation: evolution-pulse 2s ease-in-out infinite;
  }

  @keyframes evolution-shimmer {
    0% {
      background: linear-gradient(90deg, transparent 0%, transparent 100%);
    }
    50% {
      background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.25) 50%, transparent 100%);
    }
    100% {
      background: linear-gradient(90deg, transparent 0%, transparent 100%);
    }
  }
  
  .animate-evolution-shimmer {
    animation: evolution-shimmer 3s ease-in-out infinite;
    background-size: 200% 100%;
  }

  @keyframes evolution-border-glow {
    0%, 100% {
      box-shadow: 0 0 40px hsl(var(--primary) / 0.6), 0 0 80px hsl(var(--accent) / 0.3);
    }
    50% {
      box-shadow: 0 0 60px hsl(var(--primary) / 0.8), 0 0 120px hsl(var(--accent) / 0.5);
    }
  }
  
  .animate-evolution-border-glow {
    animation: evolution-border-glow 2s ease-in-out infinite;
  }

  @keyframes subtle-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  
  .animate-subtle-pulse {
    animation: subtle-pulse 2s ease-in-out infinite;
  }

  @keyframes gradient-text {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .animate-gradient-text {
    animation: gradient-text 3s ease-in-out infinite;
  }

  /* GPU layer promotion utility */
  .gpu-layer {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  @keyframes pulse-slow {
    0%, 100% {
      opacity: 0.5;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
  }

  .animate-gradient-shift {
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
  }

  .animate-gradient-text {
    background-size: 200% auto;
    animation: gradient-text 3s linear infinite;
  }

  .animate-float-slow {
    animation: float-slow 6s ease-in-out infinite;
  }

  .animate-float-medium {
    animation: float-medium 4s ease-in-out infinite;
  }

  .animate-float-fast {
    animation: float-fast 3s ease-in-out infinite;
  }

  .animate-sparkle {
    animation: sparkle 2s ease-in-out infinite;
  }

  /* Sparkle particle for quest completion */
  @keyframes sparkle-particle {
    0% {
      opacity: 1;
      transform: scale(0) translateY(0);
    }
    50% {
      opacity: 1;
      transform: scale(1.2) translateY(-10px);
    }
    100% {
      opacity: 0;
      transform: scale(0.5) translateY(-25px);
    }
  }

  .animate-sparkle-particle {
    animation: sparkle-particle 0.8s ease-out forwards;
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }

  /* Masculine Animation System */
  @keyframes pulse-gold {
    0%, 100% {
      opacity: 0.3;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.1);
    }
  }

  @keyframes breathe {
    0%, 100% {
      opacity: 0;
      transform: translateY(10px);
    }
    20%, 80% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes velocity-fade-in {
    0% {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
    }
    70% {
      transform: translateY(-5px) scale(1);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes sweep-line {
    0% {
      width: 0;
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      width: 100%;
      opacity: 0;
    }
  }

  @keyframes pulse-once {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  @keyframes dim-to-focus {
    from {
      filter: brightness(0.6);
    }
    to {
      filter: brightness(1);
    }
  }

  .animate-pulse-gold {
    animation: pulse-gold 2s ease-in-out infinite;
  }

  .animate-breathe {
    animation: breathe 2.5s ease-in-out;
  }

  .animate-velocity-fade-in {
    animation: velocity-fade-in 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInUp {
    0% {
      opacity: 0;
      transform: translateY(0);
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateY(-40px);
    }
  }

  @keyframes shimmerBackground {
    0% {
      background-position: -200% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  /* ========== COSMIQ COSMIC ANIMATIONS ========== */
  
  /* Star twinkling animation */
  @keyframes twinkle {
    0%, 100% {
      opacity: 0.3;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.2);
    }
  }

  /* Orbital motion for floating elements */
  @keyframes orbit {
    0% {
      transform: rotate(0deg) translateX(10px) rotate(0deg);
    }
    100% {
      transform: rotate(360deg) translateX(10px) rotate(-360deg);
    }
  }

  /* Nebula gradient shift */
  @keyframes nebula-shift {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.3;
    }
    50% {
      transform: translate(20px, 30px) scale(1.1);
      opacity: 0.5;
    }
  }

  /* Shooting star effect */
  @keyframes shooting-star {
    0% {
      transform: translateX(-100px) translateY(-100px);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateX(1000px) translateY(1000px);
      opacity: 0;
    }
  }

  /* Supernova burst for quest completion */
  @keyframes supernova {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
    100% {
      transform: scale(3);
      opacity: 0;
    }
  }

  /* Warp effect for navigation */
  @keyframes warp {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(0.95);
      opacity: 0.8;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Cosmiq glow pulse */
  @keyframes cosmiq-pulse {
    0%, 100% {
      box-shadow: 0 0 20px hsl(var(--cosmiq-glow) / 0.3);
    }
    50% {
      box-shadow: 0 0 40px hsl(var(--cosmiq-glow) / 0.6), 0 0 60px hsl(var(--cosmiq-glow) / 0.3);
    }
  }

  /* ========== ENHANCED STARFIELD ANIMATIONS ========== */
  
  /* Gentle stellar drift for dust particles */
  @keyframes stellar-drift {
    0%, 100% { 
      transform: translate(0, 0); 
    }
    25% { 
      transform: translate(8px, -5px); 
    }
    50% { 
      transform: translate(-4px, 8px); 
    }
    75% { 
      transform: translate(-6px, -3px); 
    }
  }

  /* Star pulse with glow expansion */
  @keyframes star-pulse {
    0%, 100% { 
      opacity: 0.5;
      filter: brightness(1);
      transform: scale(1);
    }
    50% { 
      opacity: 1;
      filter: brightness(1.3);
      transform: scale(1.15);
    }
  }

  /* Cross-sparkle for bright stars */
  @keyframes star-sparkle {
    0%, 100% { 
      opacity: 0.7;
      transform: scale(1) rotate(0deg);
    }
    25% { 
      opacity: 1;
      transform: scale(1.2) rotate(5deg);
    }
    50% { 
      opacity: 0.85;
      transform: scale(0.95) rotate(-3deg);
    }
    75% { 
      opacity: 1;
      transform: scale(1.15) rotate(2deg);
    }
  }

  /* Rare dramatic star flare */
  @keyframes star-flare {
    0%, 85%, 100% { 
      opacity: 0.7;
      transform: scale(1);
      filter: brightness(1);
    }
    92% { 
      opacity: 1;
      transform: scale(1.8);
      filter: brightness(1.6);
    }
    96% { 
      opacity: 0.9;
      transform: scale(1.2);
      filter: brightness(1.2);
    }
  }

  /* Deep nebula slow drift */
  @keyframes nebula-drift-slow {
    0%, 100% { 
      transform: translate(0, 0) scale(1) rotate(0deg);
      opacity: 0.2;
    }
    33% { 
      transform: translate(40px, -30px) scale(1.03) rotate(1deg);
      opacity: 0.25;
    }
    66% { 
      transform: translate(-30px, 35px) scale(0.98) rotate(-1deg);
      opacity: 0.18;
    }
  }

  /* Nebula breathing effect */
  @keyframes nebula-breathe {
    0%, 100% { 
      transform: translate(0, 0) scale(1) rotate(0deg);
      opacity: 0.3;
    }
    33% { 
      transform: translate(25px, -18px) scale(1.04) rotate(2deg);
      opacity: 0.38;
    }
    66% { 
      transform: translate(-18px, 22px) scale(0.97) rotate(-1.5deg);
      opacity: 0.28;
    }
  }

  /* Nebula pulse for foreground highlights */
  @keyframes nebula-pulse {
    0%, 100% { 
      transform: scale(1);
      opacity: 0.25;
    }
    50% { 
      transform: scale(1.08);
      opacity: 0.35;
    }
  }

  /* Enhanced shooting star animations - rare occurrence (streak only in first ~2% of cycle) */
  
  /* Shooting star 1: 90s cycle, streak in first 2% (~1.8s) */
  @keyframes shooting-star-1 {
    0% {
      transform: translateX(0) translateY(0) rotate(35deg);
      opacity: 0;
    }
    0.5% { opacity: 1; }
    1.8% { opacity: 0.8; }
    2% {
      transform: translateX(60vw) translateY(40vh) rotate(35deg);
      opacity: 0;
    }
    100% {
      transform: translateX(60vw) translateY(40vh) rotate(35deg);
      opacity: 0;
    }
  }

  /* Shooting star 2: 120s cycle, streak in first ~1.5% (~1.8s) */
  @keyframes shooting-star-2 {
    0% {
      transform: translateX(0) translateY(0) rotate(145deg);
      opacity: 0;
    }
    0.4% { opacity: 1; }
    1.3% { opacity: 0.7; }
    1.5% {
      transform: translateX(-55vw) translateY(45vh) rotate(145deg);
      opacity: 0;
    }
    100% {
      transform: translateX(-55vw) translateY(45vh) rotate(145deg);
      opacity: 0;
    }
  }

  /* Shooting star 3: 150s cycle, streak in first ~1.3% (~2s) */
  @keyframes shooting-star-3 {
    0% {
      transform: translateX(0) translateY(0) rotate(80deg);
      opacity: 0;
    }
    0.3% { opacity: 1; }
    1.1% { opacity: 0.6; }
    1.3% {
      transform: translateX(12vw) translateY(50vh) rotate(80deg);
      opacity: 0;
    }
    100% {
      transform: translateX(12vw) translateY(50vh) rotate(80deg);
      opacity: 0;
    }
  }

  /* Cross-sparkle star effect */
  .star-cross {
    position: relative;
  }

  .star-cross::before,
  .star-cross::after {
    content: '';
    position: absolute;
    background: linear-gradient(to right, transparent, var(--star-color, white), transparent);
    top: 50%;
    left: 50%;
    pointer-events: none;
  }

  .star-cross::before {
    width: calc(var(--star-size, 4px) * 3);
    height: 1px;
    transform: translate(-50%, -50%);
    opacity: 0.6;
  }

  .star-cross::after {
    width: 1px;
    height: calc(var(--star-size, 4px) * 3);
    transform: translate(-50%, -50%);
    opacity: 0.6;
  }

  /* Animation utility classes */
  .animate-twinkle {
    animation: twinkle 3s ease-in-out infinite;
  }

  .animate-orbit {
    animation: orbit 20s linear infinite;
  }

  .animate-supernova {
    animation: supernova 0.6s ease-out forwards;
  }

  .animate-warp {
    animation: warp 0.3s ease-in-out;
  }

  .animate-cosmiq-pulse {
    animation: cosmiq-pulse 2s ease-in-out infinite;
  }

  .animate-fade-in {
    animation: fadeIn 2.5s ease-out forwards;
  }
  
  .animate-fade-in-delayed {
    animation: fadeIn 2.5s ease-out 0.8s forwards;
    opacity: 0;
  }

  .animate-sweep-line {
    animation: sweep-line 1.2s ease-out forwards;
  }

  .animate-pulse-once {
    animation: pulse-once 0.8s ease-out;
  }

  .animate-dim-to-focus {
    animation: dim-to-focus 0.3s ease-out forwards;
  }

  .mentor-aura {
    position: relative;
  }

  .mentor-aura::before {
    content: '';
    position: absolute;
    inset: -20px;
    background: radial-gradient(circle, hsl(var(--royal-purple) / 0.05) 0%, transparent 70%);
    pointer-events: none;
    z-index: -1;
  }

  /* React Joyride Custom Styles - Border Pulse Only */
  .__floater__open {
    filter: none !important;
    animation: none !important;
    opacity: 1 !important;
    transition: none !important;
  }

  .react-joyride__tooltip {
    opacity: 1 !important;
    background-color: hsl(var(--card)) !important;
    transition: none !important;
    animation: tooltip-border-pulse 2s ease-in-out infinite !important;
  }

  @keyframes spotlight-border-pulse {
    0%, 100% {
      box-shadow:
        0 0 0 4px hsl(var(--primary) / 0.4),
        0 0 20px hsl(var(--primary) / 0.3);
    }
    50% {
      box-shadow:
        0 0 0 6px hsl(var(--primary) / 0.7),
        0 0 30px hsl(var(--primary) / 0.5);
    }
  }

  @keyframes tooltip-border-pulse {
    0%, 100% {
      border-color: hsl(var(--primary) / 0.8);
      box-shadow:
        0 0 0 2px hsl(var(--primary) / 0.3),
        0 20px 50px rgba(0, 0, 0, 0.5);
    }
    50% {
      border-color: hsl(var(--primary) / 1);
      box-shadow:
        0 0 0 4px hsl(var(--primary) / 0.5),
        0 0 40px hsl(var(--primary) / 0.3),
        0 20px 50px rgba(0, 0, 0, 0.5);
    }
  }

  .react-joyride__spotlight {
    background-color: transparent !important;
    border-radius: var(--radius) !important;
    animation: spotlight-border-pulse 2s ease-in-out infinite !important;
  }

  .react-joyride__overlay {
    background-color: hsl(0 0% 0% / 0.75) !important;
  }

  /* Safe Area Support for Mobile Devices (iOS notches, home indicators) */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Bottom Nav Height + Safe Area for page padding */
  .pb-nav-safe {
    padding-bottom: calc(5.5rem + env(safe-area-inset-bottom, 0px));
  }

  .mb-nav-safe {
    margin-bottom: calc(5rem + env(safe-area-inset-bottom, 0px));
  }

  /* ========== COSMIQ GLASS-MORPHISM UTILITIES ========== */
  
  /* ===== DEPTH LAYERING SYSTEM ===== 
     Creates parallax depth effect through varying blur levels
     Layer 1 (foreground): Sharp, minimal blur - closest to user
     Layer 2 (mid-ground): Medium blur - interactive elements
     Layer 3 (background): Heavy blur - distant elements
  */
  
  /* DEPTH LAYER 1 - Foreground (closest to user, sharpest) */
  .depth-layer-1 {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    transform: translateZ(30px);
    z-index: 30;
  }
  
  /* DEPTH LAYER 2 - Mid-ground (interactive elements) */
  .depth-layer-2 {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transform: translateZ(15px);
    z-index: 20;
  }
  
  /* DEPTH LAYER 3 - Background (furthest, most blur) */
  .depth-layer-3 {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    transform: translateZ(0px);
    z-index: 10;
  }
  
  /* Ultra transparent glass - for main containers (most see-through) */
  /* DEPTH: Layer 2 (mid-ground) */
  .cosmiq-glass-ultra {
    background: linear-gradient(
      135deg,
      hsl(var(--card) / 0.22),
      hsl(var(--card) / 0.12)
    );
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid hsl(var(--cosmiq-glow) / 0.35);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.35),
      0 4px 12px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 hsl(var(--pure-white) / 0.1);
    transform: translateZ(15px);
  }
  
  /* Subtle glass - for secondary elements */
  /* DEPTH: Layer 3 (background) */
  .cosmiq-glass-subtle {
    background: linear-gradient(
      135deg,
      hsl(var(--card) / 0.35),
      hsl(var(--card) / 0.2)
    );
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border: 1px solid hsl(var(--cosmiq-glow) / 0.2);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.25),
      inset 0 1px 0 hsl(var(--pure-white) / 0.05);
    transform: translateZ(0px);
  }
  
  /* Foreground glass - for modals, tooltips, popups (closest to user) */
  /* DEPTH: Layer 1 (foreground) */
  .cosmiq-glass-foreground {
    background: linear-gradient(
      135deg,
      hsl(var(--card) / 0.15),
      hsl(var(--card) / 0.08)
    );
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    border: 1px solid hsl(var(--cosmiq-glow) / 0.45);
    box-shadow: 
      0 12px 40px rgba(0, 0, 0, 0.4),
      0 6px 16px rgba(0, 0, 0, 0.2),
      inset 0 1px 0 hsl(var(--pure-white) / 0.15);
    transform: translateZ(30px);
  }
  
  /* Navigation glass - for bottom nav and headers */
  /* DEPTH: Layer 1 (foreground - always on top) */
  .cosmiq-glass-nav {
    background: linear-gradient(
      180deg,
      hsl(var(--background) / 0.5),
      hsl(var(--background) / 0.3)
    );
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border-top: 1px solid hsl(var(--cosmiq-glow) / 0.2);
    box-shadow: 
      0 -8px 32px rgba(0, 0, 0, 0.25),
      0 -2px 8px rgba(0, 0, 0, 0.1);
    transform: translateZ(30px);
  }
  
  /* Header glass - for sticky headers */
  /* DEPTH: Layer 1 (foreground - always on top) */
  .cosmiq-glass-header {
    background: linear-gradient(
      180deg,
      hsl(var(--background) / 0.4),
      hsl(var(--background) / 0.2)
    );
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    border-bottom: 1px solid hsl(var(--cosmiq-glow) / 0.2);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    transform: translateZ(30px);
  }
  
  /* Base cosmiq glass effect (updated for more transparency) */
  .cosmiq-glass {
    background: linear-gradient(
      135deg,
      hsl(var(--card) / 0.5),
      hsl(var(--card) / 0.35)
    );
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid hsl(var(--cosmiq-glow) / 0.2);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 hsl(var(--pure-white) / 0.1);
  }

  /* Enhanced cosmiq card with glow */
  .cosmiq-card {
    @apply cosmiq-glass;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .cosmiq-card:hover {
    border-color: hsl(var(--cosmiq-glow) / 0.4);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.4),
      0 0 40px hsl(var(--cosmiq-glow) / 0.2),
      inset 0 1px 0 hsl(var(--pure-white) / 0.1);
    transform: translateY(-2px);
  }

  /* Cosmiq button with glow effect */
  .cosmiq-button {
    @apply cosmiq-glass;
    position: relative;
    overflow: hidden;
  }

  .cosmiq-button::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      transparent,
      hsl(var(--cosmiq-glow) / 0.1),
      transparent
    );
    transform: translateX(-100%);
    transition: transform 0.6s ease;
  }

  .cosmiq-button:hover::before {
    transform: translateX(100%);
  }

  /* Star shimmer effect for loading states */
  .star-shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      hsl(var(--stardust-gold) / 0.3),
      transparent
    );
    background-size: 200% 100%;
    animation: shimmerBackground 2s ease-in-out infinite;
  }

  /* ========== GAMIFICATION ANIMATIONS ========== */
  
  /* Milestone sparkle */
  @keyframes milestone-sparkle {
    0% {
      opacity: 0;
      transform: translateX(-50%) translateY(0) scale(0);
    }
    50% {
      opacity: 1;
      transform: translateX(-50%) translateY(-10px) scale(1.2);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) translateY(-20px) scale(0);
    }
  }
  
  .animate-milestone-sparkle {
    animation: milestone-sparkle 1.5s ease-out forwards;
  }
  
  /* Progress shimmer slide */
  @keyframes shimmer-slide {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  .animate-shimmer-slide {
    animation: shimmer-slide 2s ease-in-out infinite;
  }
  
  /* Pulse glow for 100% progress */
  @keyframes pulse-glow {
    0%, 100% {
      opacity: 0.3;
    }
    50% {
      opacity: 0.6;
    }
  }
  
  .animate-pulse-glow {
    animation: pulse-glow 1.5s ease-in-out infinite;
  }
  
  /* Combo pop animation */
  @keyframes combo-pop {
    0% {
      opacity: 0;
      transform: translateX(-50%) scale(0.5) translateY(20px);
    }
    30% {
      opacity: 1;
      transform: translateX(-50%) scale(1.1) translateY(0);
    }
    50% {
      transform: translateX(-50%) scale(1) translateY(0);
    }
    80% {
      opacity: 1;
      transform: translateX(-50%) scale(1) translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) scale(0.9) translateY(-10px);
    }
  }
  
  .animate-combo-pop {
    animation: combo-pop 2.5s ease-out forwards;
  }
  
  /* Combo particles */
  @keyframes combo-particle {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-30px) scale(0);
    }
  }
  
  .animate-combo-particle {
    animation: combo-particle 0.8s ease-out forwards;
  }
  
  /* Flame flicker */
  @keyframes flame-flicker {
    0%, 100% {
      transform: scale(1) rotate(0deg);
      filter: brightness(1);
    }
    25% {
      transform: scale(1.05) rotate(-2deg);
      filter: brightness(1.1);
    }
    50% {
      transform: scale(0.98) rotate(1deg);
      filter: brightness(0.95);
    }
    75% {
      transform: scale(1.02) rotate(-1deg);
      filter: brightness(1.05);
    }
  }
  
  .animate-flame-flicker {
    animation: flame-flicker 0.5s ease-in-out infinite;
  }
  
  /* XP pulse */
  @keyframes xp-pulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 hsl(var(--primary) / 0.4);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 4px hsl(var(--primary) / 0);
    }
  }
  
  .animate-xp-pulse {
    animation: xp-pulse 0.5s ease-out;
  }
  
  /* XP float animation */
  @keyframes xp-float {
    0% {
      opacity: 0;
      transform: translateX(-50%) translateY(10px) scale(0.8);
    }
    20% {
      opacity: 1;
      transform: translateX(-50%) translateY(0) scale(1.1);
    }
    40% {
      transform: translateX(-50%) translateY(-5px) scale(1);
    }
    80% {
      opacity: 1;
      transform: translateX(-50%) translateY(-15px) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateX(-50%) translateY(-25px) scale(0.9);
    }
  }
  
  .animate-xp-float {
    animation: xp-float 2s ease-out forwards;
  }
  
  /* Sparkle burst */
  @keyframes sparkle-burst {
    0% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.5);
    }
    100% {
      opacity: 0;
      transform: scale(0) translateY(-20px);
    }
  }
  
  .animate-sparkle-burst {
    animation: sparkle-burst 0.8s ease-out forwards;
  }
  
  /* Ripple expand for checkbox */
  @keyframes ripple-expand {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) scale(3);
      opacity: 0;
    }
  }
  
  .animate-ripple-expand {
    animation: ripple-expand 0.6s ease-out forwards;
  }
  
  /* Task complete animation */
  @keyframes task-complete {
    0% {
      transform: scale(1);
    }
    15% {
      transform: scale(1.02);
    }
    30% {
      transform: scale(0.98);
    }
    100% {
      transform: scale(1);
    }
  }
  
  .animate-task-complete {
    animation: task-complete 0.4s ease-out;
  }
  
  /* Floating particles for empty state */
  @keyframes float-particle {
    0%, 100% {
      opacity: 0.3;
      transform: translateY(0) scale(1);
    }
    50% {
      opacity: 0.8;
      transform: translateY(-20px) scale(1.2);
    }
  }
  
  .animate-float-particle {
    animation: float-particle 3s ease-in-out infinite;
  }
  
  /* Slow float for icons */
  @keyframes float-slow {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }
  
  .animate-float-slow {
    animation: float-slow 3s ease-in-out infinite;
  }
  
  /* Pulse subtle for buttons */
  @keyframes pulse-subtle {
    0%, 100% {
      box-shadow: 0 4px 12px hsl(var(--primary) / 0.25);
    }
    50% {
      box-shadow: 0 4px 20px hsl(var(--primary) / 0.4);
    }
  }
  
  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }
  
  /* Gradient shift for quest clear */
  @keyframes gradient-shift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .animate-gradient-shift {
    background-size: 200% 200%;
    animation: gradient-shift 3s ease infinite;
  }
  
  /* Schedule button cosmic glow */
  @keyframes cosmic-button-glow {
    0%, 100% {
      box-shadow: 0 0 0 0 hsl(var(--primary) / 0.3);
      border-color: hsl(var(--border) / 0.6);
    }
    50% {
      box-shadow: 0 0 15px hsl(var(--primary) / 0.2);
      border-color: hsl(var(--primary) / 0.4);
    }
  }
  
  .animate-cosmic-glow {
    animation: cosmic-button-glow 3s ease-in-out infinite;
  }

  /* ========== SMITE-INSPIRED FRAME ANIMATIONS ========== */
  
  /* Frame shimmer effect - light sweep across border */
  @keyframes frame-shimmer {
    0% {
      transform: translateX(-100%) skewX(-20deg);
    }
    100% {
      transform: translateX(200%) skewX(-20deg);
    }
  }
  
  .animate-frame-shimmer {
    animation: frame-shimmer 3s ease-in-out infinite;
  }
  
  /* Frame pulse glow - pulsing box shadow */
  @keyframes frame-pulse {
    0%, 100% {
      filter: brightness(1);
      box-shadow: 0 0 15px var(--glow-color, hsl(var(--primary) / 0.4));
    }
    50% {
      filter: brightness(1.1);
      box-shadow: 0 0 30px var(--glow-color, hsl(var(--primary) / 0.6)), 
                  0 0 50px var(--glow-color, hsl(var(--primary) / 0.3));
    }
  }
  
  .animate-frame-pulse {
    animation: frame-pulse 2s ease-in-out infinite;
  }
  
  /* Frame breathe - slow subtle glow */
  @keyframes frame-breathe {
    0%, 100% {
      opacity: 0.7;
      filter: brightness(1);
    }
    50% {
      opacity: 1;
      filter: brightness(1.15);
    }
  }
  
  .animate-frame-breathe {
    animation: frame-breathe 3s ease-in-out infinite;
  }
  
  /* Frame flicker - fire/energy effect */
  @keyframes frame-flicker {
    0%, 100% {
      opacity: 1;
      filter: brightness(1);
    }
    10% {
      opacity: 0.9;
      filter: brightness(1.2);
    }
    20% {
      opacity: 1;
      filter: brightness(0.95);
    }
    40% {
      opacity: 0.95;
      filter: brightness(1.1);
    }
    60% {
      opacity: 1;
      filter: brightness(1);
    }
    80% {
      opacity: 0.92;
      filter: brightness(1.15);
    }
  }
  
  .animate-frame-flicker {
    animation: frame-flicker 1.5s ease-in-out infinite;
  }
  
  /* Frame shift - color/gradient shift for dimensional */
  @keyframes frame-shift {
    0% {
      filter: hue-rotate(0deg) brightness(1);
    }
    33% {
      filter: hue-rotate(60deg) brightness(1.1);
    }
    66% {
      filter: hue-rotate(-60deg) brightness(1.05);
    }
    100% {
      filter: hue-rotate(0deg) brightness(1);
    }
  }
  
  .animate-frame-shift {
    animation: frame-shift 4s linear infinite;
  }
  
  /* Gradient border animation for legendary frames */
  @keyframes gradient-border {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .animate-gradient-border {
    background-size: 200% 200%;
    animation: gradient-border 3s ease infinite;
  }
  
  /* Frame particles floating effect */
  @keyframes frame-particle {
    0% {
      opacity: 0;
      transform: translateY(0) scale(0.5);
    }
    20% {
      opacity: 1;
      transform: translateY(-5px) scale(1);
    }
    80% {
      opacity: 0.8;
      transform: translateY(-20px) scale(0.8);
    }
    100% {
      opacity: 0;
      transform: translateY(-30px) scale(0.3);
    }
  }
  
  .animate-frame-particle {
    animation: frame-particle 3s ease-out infinite;
  }

  /* Stellar Beats - Hit effect pop animation */
  @keyframes hit-pop {
    0% {
      opacity: 1;
      transform: scale(0.5) translateY(0);
    }
    100% {
      opacity: 0;
      transform: scale(1.5) translateY(-30px);
    }
  }
  
  .animate-hit-pop {
    animation: hit-pop 0.5s ease-out forwards;
    will-change: transform, opacity;
  }
  
  /* GPU acceleration layer hint */
  .gpu-layer {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
    will-change: transform;
  }

  /* ============================================
     GUILD CINEMATIC ANIMATIONS
     ============================================ */
  
  /* Guild banner flow - animated gradient background */
  @keyframes guild-banner-flow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  .animate-guild-banner-flow {
    animation: guild-banner-flow 8s ease infinite;
    background-size: 300% 300%;
  }
  
  /* Emblem glow pulse */
  @keyframes emblem-glow {
    0%, 100% {
      box-shadow: 0 0 20px var(--emblem-color, hsl(var(--primary))),
                  0 0 40px var(--emblem-color, hsl(var(--primary) / 0.5)),
                  0 0 60px var(--emblem-color, hsl(var(--primary) / 0.3));
      transform: scale(1);
    }
    50% {
      box-shadow: 0 0 30px var(--emblem-color, hsl(var(--primary))),
                  0 0 60px var(--emblem-color, hsl(var(--primary) / 0.6)),
                  0 0 90px var(--emblem-color, hsl(var(--primary) / 0.4));
      transform: scale(1.02);
    }
  }
  
  .animate-emblem-glow {
    animation: emblem-glow 3s ease-in-out infinite;
  }
  
  /* Guild card shimmer sweep */
  @keyframes guild-shimmer {
    0% {
      transform: translateX(-100%) skewX(-15deg);
    }
    100% {
      transform: translateX(200%) skewX(-15deg);
    }
  }
  
  .animate-guild-shimmer {
    animation: guild-shimmer 3s ease-in-out infinite;
  }
  
  /* Guild 3D tilt on hover */
  @keyframes guild-tilt-settle {
    0% {
      transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
    }
    100% {
      transform: perspective(1000px) rotateX(0deg) rotateY(0deg);
    }
  }
  
  /* Member shine sweep */
  @keyframes member-shine {
    0% {
      left: -100%;
    }
    100% {
      left: 200%;
    }
  }
  
  .animate-member-shine {
    animation: member-shine 2s ease-in-out infinite;
  }
  
  /* Floating decorative element */
  @keyframes guild-float {
    0%, 100% {
      transform: translateY(0px) rotate(0deg);
      opacity: 0.6;
    }
    25% {
      transform: translateY(-15px) rotate(5deg);
      opacity: 0.8;
    }
    50% {
      transform: translateY(-5px) rotate(-3deg);
      opacity: 0.7;
    }
    75% {
      transform: translateY(-20px) rotate(3deg);
      opacity: 0.9;
    }
  }
  
  .animate-guild-float {
    animation: guild-float 6s ease-in-out infinite;
  }
  
  /* Rank change animation */
  @keyframes rank-change {
    0% {
      transform: scale(1);
    }
    25% {
      transform: scale(1.15);
    }
    50% {
      transform: scale(0.95);
    }
    75% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }
  
  .animate-rank-change {
    animation: rank-change 0.5s ease-out;
  }
  
  /* Aurora wave for cosmic banner */
  @keyframes aurora-wave {
    0% {
      transform: translateX(-100%) skewX(-5deg);
      opacity: 0;
    }
    20% {
      opacity: 0.4;
    }
    80% {
      opacity: 0.4;
    }
    100% {
      transform: translateX(200%) skewX(-5deg);
      opacity: 0;
    }
  }
  
  .animate-aurora-wave {
    animation: aurora-wave 4s ease-in-out infinite;
  }
  
  /* Particle rise for embers */
  @keyframes particle-rise {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-100px) scale(0.5);
      opacity: 0;
    }
  }
  
  .animate-particle-rise {
    animation: particle-rise 4s ease-out infinite;
  }
  
  /* Crystal sparkle */
  @keyframes crystal-sparkle {
    0%, 100% {
      opacity: 0.3;
      transform: scale(0.8) rotate(0deg);
    }
    50% {
      opacity: 1;
      transform: scale(1.2) rotate(180deg);
    }
  }
  
  .animate-crystal-sparkle {
    animation: crystal-sparkle 2s ease-in-out infinite;
  }
  
  /* Lightning flash */
  @keyframes lightning-flash {
    0%, 100% {
      opacity: 0;
    }
    5%, 10% {
      opacity: 1;
    }
    15% {
      opacity: 0;
    }
    20%, 25% {
      opacity: 0.8;
    }
    30% {
      opacity: 0;
    }
  }
  
  .animate-lightning-flash {
    animation: lightning-flash 5s ease-in-out infinite;
  }

}

/* Guild glass-morphism utilities */
.guild-glass {
  background: linear-gradient(
    135deg,
    hsl(var(--card) / 0.9) 0%,
    hsl(var(--card) / 0.7) 50%,
    hsl(var(--card) / 0.8) 100%
  );
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid hsl(var(--border) / 0.3);
}

.guild-glass-intense {
  background: linear-gradient(
    145deg,
    hsl(var(--card) / 0.95) 0%,
    hsl(var(--card) / 0.85) 100%
  );
  backdrop-filter: blur(30px) saturate(200%);
  -webkit-backdrop-filter: blur(30px) saturate(200%);
  border: 1px solid hsl(var(--border) / 0.4);
  box-shadow: 
    0 8px 32px hsl(var(--primary) / 0.15),
    inset 0 1px 0 hsl(var(--foreground) / 0.1);
}

.guild-shimmer-overlay {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  border-radius: inherit;
}

.guild-shimmer-overlay::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    hsl(var(--foreground) / 0.05),
    transparent
  );
  animation: guild-shimmer 3s ease-in-out infinite;
}

/* Guild banner patterns */
.guild-banner-cosmic {
  background: linear-gradient(
    135deg,
    var(--guild-color, hsl(var(--primary))) 0%,
    hsl(280, 80%, 40%) 30%,
    hsl(200, 80%, 30%) 60%,
    var(--guild-color, hsl(var(--primary))) 100%
  );
}

.guild-banner-flames {
  background: linear-gradient(
    180deg,
    hsl(20, 100%, 50%) 0%,
    var(--guild-color, hsl(var(--primary))) 40%,
    hsl(40, 100%, 50%) 70%,
    hsl(0, 100%, 40%) 100%
  );
}

.guild-banner-crystal {
  background: linear-gradient(
    135deg,
    hsl(200, 80%, 70%) 0%,
    var(--guild-color, hsl(var(--primary))) 30%,
    hsl(180, 60%, 80%) 60%,
    hsl(220, 70%, 60%) 100%
  );
}

.guild-banner-lightning {
  background: linear-gradient(
    160deg,
    hsl(45, 100%, 50%) 0%,
    var(--guild-color, hsl(var(--primary))) 40%,
    hsl(280, 80%, 50%) 80%,
    hsl(45, 100%, 60%) 100%
  );
}

.guild-banner-nature {
  background: linear-gradient(
    135deg,
    hsl(120, 60%, 40%) 0%,
    var(--guild-color, hsl(var(--primary))) 35%,
    hsl(80, 70%, 50%) 65%,
    hsl(140, 50%, 35%) 100%
  );
}

.guild-banner-void {
  background: linear-gradient(
    180deg,
    hsl(280, 80%, 20%) 0%,
    var(--guild-color, hsl(var(--primary))) 40%,
    hsl(260, 90%, 15%) 70%,
    hsl(300, 70%, 10%) 100%
  );
}

.guild-banner-aurora {
  background: linear-gradient(
    135deg,
    hsl(180, 80%, 50%) 0%,
    var(--guild-color, hsl(var(--primary))) 25%,
    hsl(280, 70%, 60%) 50%,
    hsl(120, 60%, 50%) 75%,
    hsl(200, 80%, 40%) 100%
  );
}

.guild-banner-nebula {
  background: linear-gradient(
    145deg,
    hsl(280, 80%, 40%) 0%,
    var(--guild-color, hsl(var(--primary))) 30%,
    hsl(320, 70%, 50%) 50%,
    hsl(200, 60%, 40%) 70%,
    hsl(260, 80%, 30%) 100%
  );
}

