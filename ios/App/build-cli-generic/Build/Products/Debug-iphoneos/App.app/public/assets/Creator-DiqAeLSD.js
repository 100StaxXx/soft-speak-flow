import{H as w,r as h,j as e,K as p,dd as f,dB as C,da as k,ax as c,o as S,aO as P}from"./vendor-DK8VKJIv.js";import{S as j,f as y,B as t,L as i,a as o,s as _}from"./index-BJ43zXLh.js";import"./date-vendor-BRrA_NVo.js";import"./three-vendor-qI8GXUTd.js";function E(){const v=w(),[s,n]=h.useState({name:"",email:"",handle:"",paypal_email:""}),[x,u]=h.useState(!1),[r,g]=h.useState(null),b=async a=>{a.preventDefault(),u(!0);try{const{data:l,error:m}=await _.functions.invoke("create-influencer-code",{body:s});if(m)throw m;if(l.error)throw new Error(l.error);g(l),c.success("Your referral code is ready!")}catch(l){console.error("Failed to create code:",l),c.error(l instanceof Error?l.message:"Failed to create referral code")}finally{u(!1)}},d=async(a,l)=>{try{await navigator.clipboard.writeText(a),c.success(`${l} copied!`)}catch{c.error("Failed to copy")}},N=async()=>{if(r)if(S.isNativePlatform())try{await P.share({title:"Join me on Cosmiq!",text:r.promo_caption,url:r.link,dialogTitle:"Share your referral link"})}catch(a){console.error("Share failed:",a)}else if(navigator.share)try{await navigator.share({title:"Join me on Cosmiq!",text:r.promo_caption,url:r.link})}catch(a){console.error("Share failed:",a)}else await d(r.link,"Link")};return r?e.jsxs("div",{className:"min-h-screen pb-nav-safe relative overflow-hidden",children:[e.jsx(j,{}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:e.jsxs(y,{className:"w-full max-w-lg p-8 cosmic-glass",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(p,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx("h1",{className:"font-heading text-3xl font-bold mb-2",children:"Your Code is Ready! ✨"}),e.jsx("p",{className:"text-muted-foreground",children:"Start sharing and earn rewards when your followers subscribe"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-primary/10 border border-primary/30 rounded-lg",children:[e.jsx(t,{onClick:()=>v(`/creator/dashboard?code=${r.code}`),className:"w-full",size:"lg",children:"View Your Dashboard →"}),e.jsx("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"Track your referrals and earnings"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm text-muted-foreground mb-2",children:"Your Referral Code"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:r.code,readOnly:!0,className:"font-mono text-lg font-bold"}),e.jsx(t,{variant:"outline",size:"icon",onClick:()=>d(r.code,"Code"),children:e.jsx(f,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm text-muted-foreground mb-2",children:"Shareable Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{value:r.link,readOnly:!0}),e.jsx(t,{variant:"outline",size:"icon",onClick:()=>d(r.link,"Link"),children:e.jsx(C,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm text-muted-foreground mb-2",children:"Pre-written Caption"}),e.jsxs("div",{className:"bg-secondary/20 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm mb-3",children:r.promo_caption}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>d(r.promo_caption,"Caption"),children:[e.jsx(f,{className:"h-3 w-3 mr-2"}),"Copy Caption"]})]})]}),e.jsxs(t,{onClick:N,className:"w-full",size:"lg",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Share Now"]}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"How it Works"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Share your code or link with your audience"}),e.jsx("li",{children:"• Earn 50% of their first month ($5) or 20% of first year ($20)"}),e.jsx("li",{children:"• Minimum payout: $50 via PayPal"}),e.jsx("li",{children:"• Payouts require admin approval"})]})]})]})]})})]}):e.jsxs("div",{className:"min-h-screen pb-nav-safe relative overflow-hidden",children:[e.jsx(j,{}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center p-4",children:e.jsxs(y,{className:"w-full max-w-md p-8 cosmic-glass",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(p,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx("h1",{className:"font-heading text-3xl font-bold mb-2",children:"Creator Portal"}),e.jsx("p",{className:"text-muted-foreground",children:"Get your referral code and start earning rewards"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"name",children:"Name *"}),e.jsx(o,{id:"name",value:s.name,onChange:a=>n({...s,name:a.target.value}),required:!0,placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"email",children:"Email *"}),e.jsx(o,{id:"email",type:"email",value:s.email,onChange:a=>n({...s,email:a.target.value}),required:!0,placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"handle",children:"Social Handle *"}),e.jsx(o,{id:"handle",value:s.handle,onChange:a=>n({...s,handle:a.target.value}),required:!0,placeholder:"@yourusername"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your TikTok, Instagram, or other social media handle"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"paypal_email",children:"PayPal Email *"}),e.jsx(o,{id:"paypal_email",type:"email",value:s.paypal_email,onChange:a=>n({...s,paypal_email:a.target.value}),required:!0,placeholder:"paypal@email.com"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Where we'll send your payouts"})]}),e.jsx(t,{type:"submit",className:"w-full",size:"lg",disabled:x,children:x?"Creating...":"Get My Code"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Rewards Structure"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• 50% of first month subscription ($5)"}),e.jsx("li",{children:"• 20% of first year subscription ($20)"}),e.jsx("li",{children:"• $50 minimum payout threshold"}),e.jsx("li",{children:"• Payments via PayPal after admin approval"})]})]})]})})]})}export{E as default};
