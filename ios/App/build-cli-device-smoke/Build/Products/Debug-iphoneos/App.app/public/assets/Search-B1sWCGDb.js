import{r as C,j as e,c9 as F,X as z,H as L,q as _,cV as K,aP as B,aj as J,K as Y,ab as X,m as o,cG as O,ac as V,as as Z,c5 as ee,dJ as se,cP as ae,bd as te,l as re}from"./vendor-DK8VKJIv.js";import{a as R,B as I,c as ie,ae as le,af as ne,ag as q,ah as T,aq as j,f as g,J as f,av as W,s as v,u as oe,K as S,e as ce,S as de}from"./index-vNUnYBjj.js";import{Q as H}from"./QuoteCard-Cm3HBnaL.js";import{P}from"./PepTalkCard-Bf2ZIl8x.js";import{F as ue,H as me,o as xe}from"./date-vendor-BRrA_NVo.js";import{u as he}from"./useFirstTimeModal-CJe3iQV7.js";import"./three-vendor-qI8GXUTd.js";import"./clipboard-3OJHfwXT.js";import"./redirectUrl-BrdfvnoF.js";const pe=({onSearch:a,placeholder:i="Search...",className:d="",value:r})=>{const u=r!==void 0,[h,m]=C.useState(""),t=u?r:h,c=b=>{u||m(b),a(b)},l=()=>{u||m(""),a("")};return e.jsxs("div",{className:`relative ${d}`,children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(R,{value:t,onChange:b=>c(b.target.value),placeholder:i,className:"pl-10 pr-10 bg-background/50 border-border/50 focus:border-primary transition-colors"}),t&&e.jsx(I,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:l,"aria-label":"Clear search",children:e.jsx(z,{className:"h-4 w-4"})})]})},A=a=>{if(!a)return"Inbox";try{const i=ue(a);return me(i)?xe(i,"MMM d, yyyy"):"Date unavailable"}catch{return"Date unavailable"}},ge=({initialQuery:a="",searchQuery:i,hideSearchBar:d=!1,onSearchChange:r})=>{const[u,h]=C.useState(a),m=typeof i=="string",t=m?i:u,c=L(),{user:l}=ie();C.useEffect(()=>{m||h(a)},[a,m]);const b=s=>{m||h(s),r?.(s)},{data:p,isLoading:x}=_({queryKey:["search-quotes",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:n}=await v.from("quotes").select("*").or(`text.ilike.%${t}%,author.ilike.%${t}%`).limit(10);if(n)throw n;return s}}),{data:y,isLoading:M}=_({queryKey:["search-pep-talks",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:n}=await v.from("pep_talks").select("*").or(`title.ilike.%${t}%,description.ilike.%${t}%,quote.ilike.%${t}%`).limit(10);if(n)throw n;return s}}),{data:w,isLoading:Q}=_({queryKey:["search-challenges",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:n}=await v.from("challenges").select("*").or(`title.ilike.%${t}%,description.ilike.%${t}%`).limit(10);if(n)throw n;return s}}),{data:N,isLoading:$}=_({queryKey:["search-tasks",t,l?.id],queryFn:async()=>{if(!l?.id)throw new Error("User not authenticated");const{data:s,error:n}=await v.from("daily_tasks").select("*").eq("user_id",l.id).or(`task_text.ilike.%${t}%,notes.ilike.%${t}%,category.ilike.%${t}%`).order("task_date",{ascending:!1}).limit(10);if(n)throw n;return s||[]},enabled:t.length>=2&&!!l}),{data:k,isLoading:E}=_({queryKey:["search-epics",t,l?.id],queryFn:async()=>{if(!l?.id)throw new Error("User not authenticated");const{data:s,error:n}=await v.from("epics").select("id, title, description, target_days, status, epic_members(user_id)").or(`user_id.eq.${l.id},epic_members.user_id.eq.${l.id}`).or(`title.ilike.%${t}%,description.ilike.%${t}%`).order("created_at",{ascending:!1}).limit(10);if(n)throw n;return s||[]},enabled:t.length>=2&&!!l}),U=x||M||Q||$||E,G=p&&p.length>0||y&&y.length>0||w&&w.length>0||N&&N.length>0||k&&k.length>0;return e.jsxs("div",{className:"space-y-4",children:[!d&&e.jsx(pe,{onSearch:b,placeholder:"Search quotes, pep talks, challenges, quests, and epics...",value:t}),t.length>=2&&e.jsxs(le,{defaultValue:"all",className:"w-full",children:[e.jsxs(ne,{className:"w-full grid grid-cols-6",children:[e.jsx(q,{value:"all",children:"All"}),e.jsx(q,{value:"quotes",children:"Quotes"}),e.jsx(q,{value:"pep-talks",children:"Pep Talks"}),e.jsx(q,{value:"challenges",children:"Challenges"}),e.jsx(q,{value:"quests",children:"Quests"}),e.jsx(q,{value:"epics",children:"Epics"})]}),e.jsx(T,{value:"all",className:"space-y-4 mt-4",children:U?e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{className:"h-32 w-full"}),e.jsx(j,{className:"h-32 w-full"})]}):G?e.jsxs("div",{className:"space-y-6",children:[y&&y.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(K,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Pep Talks"})]}),e.jsx("div",{className:"space-y-3",children:y.map(s=>e.jsx(P,{...s},s.id))})]}),p&&p.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(B,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Quotes"})]}),e.jsx("div",{className:"grid gap-3",children:p.map(s=>e.jsx(H,{quote:s},s.id))})]}),w&&w.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(J,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Challenges"})]}),e.jsx("div",{className:"space-y-3",children:w.map(s=>e.jsxs(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/challenges"),onTouchEnd:n=>{n.preventDefault(),c("/challenges")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(f,{variant:"outline",children:[s.duration_days," days"]}),s.category&&e.jsx(f,{variant:"secondary",children:s.category})]})]},s.id))})]}),k&&k.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Y,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Epics"})]}),e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsxs(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/epics"),onTouchEnd:n=>{n.preventDefault(),c("/epics")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsxs(f,{variant:"outline",children:[s.target_days," days"]}),s.status&&e.jsx(f,{variant:"secondary",className:"text-xs",children:W(s.status)})]})]},s.id))})]}),N&&N.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(X,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Quests"}),e.jsx(f,{variant:"secondary",children:N.length})]}),e.jsx("div",{className:"space-y-3",children:N.map(s=>e.jsx(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/journeys"),onTouchEnd:n=>{n.preventDefault(),c("/journeys")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.task_text}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:A(s.task_date)}),s.scheduled_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.scheduled_time})]}),s.estimated_duration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.estimated_duration,"min"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.is_main_quest&&e.jsx(f,{variant:"secondary",className:"text-xs",children:"Main Quest"}),s.completed&&e.jsx(f,{className:"text-xs bg-success/10 text-success",children:"Completed"})]})]})},s.id))})]})]}):e.jsx(g,{className:"p-8 text-center",children:e.jsxs("p",{className:"text-muted-foreground",children:['No results found for "',t,'"']})})}),e.jsx(T,{value:"quotes",className:"space-y-3 mt-4",children:x?e.jsx(j,{className:"h-32 w-full"}):p&&p.length>0?p.map(s=>e.jsx(H,{quote:s},s.id)):e.jsx(g,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No quotes found"})})}),e.jsx(T,{value:"pep-talks",className:"space-y-3 mt-4",children:M?e.jsx(j,{className:"h-32 w-full"}):y&&y.length>0?y.map(s=>e.jsx(P,{...s},s.id)):e.jsx(g,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No pep talks found"})})}),e.jsx(T,{value:"challenges",className:"space-y-3 mt-4",children:Q?e.jsx(j,{className:"h-32 w-full"}):w&&w.length>0?w.map(s=>e.jsxs(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/challenges"),onTouchEnd:n=>{n.preventDefault(),c("/challenges")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(f,{variant:"outline",children:[s.duration_days," days"]}),s.category&&e.jsx(f,{variant:"secondary",children:s.category})]})]},s.id)):e.jsx(g,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No challenges found"})})}),e.jsx(T,{value:"epics",className:"space-y-3 mt-4",children:E?e.jsx(j,{className:"h-32 w-full"}):k&&k.length>0?k.map(s=>e.jsxs(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/epics"),onTouchEnd:n=>{n.preventDefault(),c("/epics")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsxs(f,{variant:"outline",children:[s.target_days," days"]}),s.status&&e.jsx(f,{variant:"secondary",className:"text-xs",children:W(s.status)})]})]},s.id)):e.jsx(g,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No epics found"})})}),e.jsx(T,{value:"quests",className:"space-y-3 mt-4",children:$?e.jsx(j,{className:"h-32 w-full"}):N&&N.length>0?N.map(s=>e.jsx(g,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>c("/journeys"),onTouchEnd:n=>{n.preventDefault(),c("/journeys")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.task_text}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:A(s.task_date)}),s.scheduled_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.scheduled_time})]}),s.estimated_duration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.estimated_duration,"min"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.is_main_quest&&e.jsx(f,{variant:"secondary",className:"text-xs",children:"Main Quest"}),s.completed&&e.jsx(f,{className:"text-xs bg-success/10 text-success",children:"Completed"})]})]})},s.id)):e.jsx(g,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No quests found"})})})]}),t.length>0&&t.length<2&&e.jsx(g,{className:"p-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 2 characters to search"})})]})},fe=({searchQuery:a,onSearchChange:i})=>{const d=C.useMemo(()=>Array.from({length:7},(r,u)=>({id:u,size:Math.random()*120+80,x:Math.random()*120-10,y:Math.random()*80,duration:Math.random()*10+15,delay:Math.random()*4})),[]);return e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-gradient-to-br from-[hsl(var(--deep-space))] via-[hsl(var(--royal-purple)/0.6)] to-[hsl(var(--nebula-pink)/0.6)] px-6 py-12 md:px-10 md:py-16 shadow-[0_25px_120px_rgba(88,63,172,0.3)]",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.08),_transparent)]"}),d.map(r=>e.jsx(o.div,{className:"absolute rounded-full blur-3xl opacity-70 pointer-events-none",style:{width:r.size,height:r.size,left:`${r.x}%`,top:`${r.y}%`,background:r.id%2===0?"radial-gradient(circle, rgba(255,255,255,0.4), transparent)":"radial-gradient(circle, rgba(131,105,255,0.5), transparent)"},animate:{x:[0,25,-20,0],y:[0,-35,20,0],scale:[1,1.15,.95,1],opacity:[.25,.6,.4,.25]},transition:{duration:r.duration,delay:r.delay,repeat:1/0,ease:"easeInOut"}},r.id)),e.jsx("div",{className:"relative z-10 text-center space-y-6",children:e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"relative max-w-2xl mx-auto",children:[e.jsx(o.div,{className:"absolute -inset-1 rounded-2xl bg-gradient-to-r from-[hsl(var(--celestial-blue)/0.6)] via-[hsl(var(--nebula-pink)/0.7)] to-[hsl(var(--stardust-gold)/0.6)] blur-xl opacity-70",animate:{opacity:[.5,.8,.5]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative rounded-2xl bg-background/80 backdrop-blur-2xl border border-white/10 shadow-[0_15px_60px_rgba(0,0,0,0.35)]",children:[e.jsx(F,{className:"absolute left-5 top-1/2 -translate-y-1/2 h-5 w-5 text-white/50"}),e.jsx(R,{value:a,onChange:r=>i(r.target.value),placeholder:"Search across everything...",className:"pl-14 pr-4 py-6 text-base bg-transparent border-none focus-visible:ring-0 focus-visible:outline-none text-pure-white placeholder:text-white/50"}),e.jsx("div",{className:"absolute inset-px rounded-[1.05rem] border border-white/5 pointer-events-none"})]})]})})]})},ye=[{label:"motivation",emoji:"ðŸ”¥"},{label:"anxiety",emoji:"ðŸŒŠ"},{label:"confidence",emoji:"ðŸ’ª"},{label:"morning",emoji:"ðŸŒ…"},{label:"growth",emoji:"ðŸŒ±"},{label:"peace",emoji:"â˜®ï¸"},{label:"strength",emoji:"âš¡"},{label:"self-love",emoji:"ðŸ’œ"}],je=({onSearch:a})=>e.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},className:"mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 text-center",children:"Popular searches"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:ye.map((i,d)=>e.jsxs(o.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.9+d*.05},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>a(i.label),className:"px-4 py-2 rounded-full bg-card/50 border border-white/10 text-sm text-foreground hover:border-primary/50 hover:bg-primary/10 transition-all backdrop-blur-sm",children:[e.jsx("span",{className:"mr-1.5",children:i.emoji}),i.label]},i.label))})]}),be=({quote:a,index:i})=>{const[d,r]=C.useState(!1),[u,h]=C.useState(!1),{toast:m}=oe(),t=async c=>{c.stopPropagation(),h(!0);try{const{data:{session:l}}=await v.auth.getSession();if(!l){m({title:"Sign in required",description:"Please sign in to save favorites",variant:"destructive"});return}d?(await v.from("favorites").delete().eq("user_id",l.user.id).eq("content_type","quote").eq("content_id",a.id),r(!1)):(await v.from("favorites").insert({user_id:l.user.id,content_type:"quote",content_id:a.id}),r(!0))}catch(l){console.error("Error toggling favorite:",l)}finally{h(!1)}};return e.jsxs(o.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.1,duration:.5},whileHover:{scale:1.01},className:"group relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-[hsl(var(--royal-purple)/0.3)] via-[hsl(var(--nebula-pink)/0.2)] to-[hsl(var(--celestial-blue)/0.3)] p-[1px]",children:e.jsx("div",{className:"absolute inset-[1px] rounded-2xl bg-card"})}),e.jsxs("div",{className:"relative p-5 rounded-2xl",children:[e.jsx(o.div,{className:"absolute -top-2 -left-2 w-10 h-10 rounded-full bg-gradient-to-br from-[hsl(var(--royal-purple))] to-[hsl(var(--nebula-pink))] flex items-center justify-center shadow-glow",animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0},children:e.jsx(O,{className:"h-4 w-4 text-pure-white"})}),e.jsxs("p",{className:"text-foreground text-base leading-relaxed italic pl-6 pr-2 mb-3",children:['"',a.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between pl-6",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["â€” ",a.author||"Unknown"]}),e.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t,disabled:u,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(V,{className:`h-4 w-4 ${d?"fill-nebula-pink text-nebula-pink":"text-muted-foreground"}`})})})]})]})]})},ve=({pepTalk:a,index:i})=>{const d=L(),r=()=>{d(`/pep-talk/${a.id}`)},u=h=>{h.preventDefault(),r()};return e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.15,duration:.5},whileHover:{y:-4},whileTap:{scale:.98},onClick:r,onTouchEnd:u,role:"button",tabIndex:0,className:"group relative cursor-pointer select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-[hsl(var(--graphite))] to-[hsl(var(--charcoal))] p-5 border border-white/5",children:[e.jsx(o.div,{className:"absolute inset-0 bg-gradient-to-br from-[hsl(var(--royal-purple)/0.2)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(o.div,{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-gradient-to-br from-[hsl(var(--stardust-gold))] to-[hsl(var(--stardust-gold)/0.7)] flex items-center justify-center shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(Z,{className:"h-4 w-4 text-obsidian ml-0.5",fill:"currentColor"})}),e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-white/10 text-xs text-stardust-gold uppercase tracking-wider mb-3",children:[e.jsx(V,{className:"h-3 w-3",fill:"currentColor"}),a.category]}),e.jsx("h3",{className:"text-lg font-bold text-pure-white mb-2 line-clamp-2 group-hover:text-stardust-gold transition-colors",children:a.title}),a.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ee,{className:"h-3 w-3"}),e.jsx("span",{children:"3-5 min listen"})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-tl from-[hsl(var(--royal-purple)/0.1)] to-transparent rounded-tl-full"})]})})},D={primary:{glow:"bg-primary/30",iconWrap:"from-primary/20 to-primary/5",icon:"text-primary",featureWrap:"bg-primary/10",featureIcon:"text-primary",button:"bg-primary hover:bg-primary/90 shadow-primary/25"},accent:{glow:"bg-accent/30",iconWrap:"from-accent/20 to-accent/5",icon:"text-accent",featureWrap:"bg-accent/10",featureIcon:"text-accent",button:"bg-accent hover:bg-accent/90 shadow-accent/25"},"celestial-blue":{glow:"bg-celestial-blue/30",iconWrap:"from-celestial-blue/20 to-celestial-blue/5",icon:"text-celestial-blue",featureWrap:"bg-celestial-blue/10",featureIcon:"text-celestial-blue",button:"bg-celestial-blue hover:bg-celestial-blue/90 shadow-celestial-blue/25"},"stardust-gold":{glow:"bg-stardust-gold/25",iconWrap:"from-stardust-gold/20 to-stardust-gold/5",icon:"text-stardust-gold",featureWrap:"bg-stardust-gold/10",featureIcon:"text-stardust-gold",button:"bg-stardust-gold hover:bg-stardust-gold/90 shadow-stardust-gold/25 text-black"},destructive:{glow:"bg-destructive/25",iconWrap:"from-destructive/20 to-destructive/5",icon:"text-destructive",featureWrap:"bg-destructive/10",featureIcon:"text-destructive",button:"bg-destructive hover:bg-destructive/90 shadow-destructive/25"}};function Ne({open:a,onClose:i,icon:d,title:r,subtitle:u,features:h,footerHint:m,buttonText:t="Continue",accentColor:c="primary"}){if(!a)return null;const l=D[c]??D.primary;return e.jsx("div",{className:"fixed left-0 right-0 z-[75] px-3 pointer-events-none",style:{top:"calc(1rem + env(safe-area-inset-top, 0px))"},"data-testid":"tutorial-floating-wrapper",children:e.jsx(o.div,{role:"dialog","aria-label":r,"aria-modal":"false","aria-live":"polite",className:"pointer-events-auto mx-auto max-w-sm rounded-3xl border border-border/70 bg-card/90 p-0 shadow-[0_24px_46px_rgba(0,0,0,0.34)] backdrop-blur-2xl overflow-hidden",children:e.jsxs(o.div,{initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",damping:25,stiffness:300},children:[e.jsx("button",{type:"button",onClick:i,"aria-label":"Hide tutorial",className:"absolute right-3 top-3 z-10 rounded-full p-1.5 text-muted-foreground/80 hover:text-foreground hover:bg-muted/60 transition-colors",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs("div",{className:"pt-8 pb-4 flex flex-col items-center",children:[e.jsxs(o.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,type:"spring",damping:15},className:"relative",children:[e.jsx("div",{className:S("absolute inset-0 rounded-full blur-2xl scale-150",l.glow)}),e.jsx("div",{className:S("relative w-16 h-16 rounded-2xl bg-gradient-to-br flex items-center justify-center border border-white/10 shadow-lg",l.iconWrap),children:e.jsx(d,{className:S("w-8 h-8",l.icon)})})]}),e.jsx(o.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mt-5 text-xl font-semibold tracking-tight text-foreground",children:r}),e.jsx(o.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-2 text-sm text-muted-foreground text-center px-6 leading-relaxed",children:u})]}),e.jsx("div",{className:"px-5 pb-4",children:e.jsx("div",{className:"rounded-2xl bg-card/50 backdrop-blur-sm divide-y divide-border/30 overflow-hidden",children:h.map((b,p)=>{const x=b.icon;return e.jsxs(o.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.25+p*.05},className:"flex items-center gap-3 px-4 py-3.5",children:[e.jsx("div",{className:S("w-8 h-8 rounded-xl flex items-center justify-center flex-shrink-0",l.featureWrap),children:e.jsx(x,{className:S("w-4 h-4",l.featureIcon)})}),e.jsx("span",{className:"text-sm text-foreground/90",children:b.text})]},p)})})}),m&&e.jsx(o.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"px-6 pb-2 text-xs text-muted-foreground text-center",children:m}),e.jsx("div",{className:"px-5 pb-6 pt-2",children:e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},children:e.jsx(I,{onClick:i,className:S("w-full h-12 rounded-full text-base shadow-lg transition-all duration-200 active:scale-[0.98]",l.button),children:t})})})]})})})}const we=[{icon:se,text:"Search for quests, quotes, and pep talks"},{icon:O,text:"Browse featured quotes for daily inspiration"},{icon:ae,text:"Discover pep talks from your mentor"}];function ke({open:a,onClose:i}){return e.jsx(Ne,{open:a,onClose:i,icon:F,title:"Discover & Explore",subtitle:"Your discovery hub for content, quotes, and pep talks to fuel your journey.",features:we,footerHint:"Start typing to search or explore featured content!",buttonText:"Continue"})}const Qe=()=>{const a=te(),i=L(),[d,r]=C.useState(""),u=d.trim(),h=u.length>=2,{showModal:m,dismissModal:t}=he("search"),{data:c,isLoading:l}=_({queryKey:["featured-quotes"],queryFn:async()=>{const{data:x}=await v.from("quotes").select("id, text, author").order("created_at",{ascending:!1}).limit(4);return x||[]}}),{data:b,isLoading:p}=_({queryKey:["featured-pep-talks"],queryFn:async()=>{const{data:x}=await v.from("pep_talks").select("id, title, category, description").order("created_at",{ascending:!1}).limit(3);return x||[]}});return e.jsxs(ce,{children:[e.jsx(de,{}),e.jsxs("div",{className:"relative min-h-screen pb-nav-safe pt-safe",children:[e.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-8 space-y-10",children:[e.jsx(fe,{searchQuery:d,onSearchChange:r}),e.jsx(re,{mode:"wait",children:h?e.jsx(o.div,{initial:a?!1:{opacity:0,y:12},animate:{opacity:1,y:0},exit:a?{opacity:0}:{opacity:0,y:-8},transition:{duration:a?0:.24,ease:"easeOut"},children:e.jsx(ge,{searchQuery:u,hideSearchBar:!0})},"search-results"):e.jsxs(o.div,{initial:a?!1:{opacity:0,y:8},animate:{opacity:1,y:0},exit:a?{opacity:0}:{opacity:0,y:-6},transition:{duration:a?0:.24},className:"space-y-12",children:[e.jsx(je,{onSearch:r}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(o.h2,{initial:a?!1:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:a?0:.2},className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-royal-purple"}),"Featured Quotes"]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>i("/library"),className:"text-muted-foreground hover:text-foreground",children:"View all"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-32 rounded-2xl"}),e.jsx(j,{className:"h-32 rounded-2xl"})]}):c?.map((x,y)=>e.jsx(be,{quote:x,index:y},x.id))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(o.h2,{initial:a?!1:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:a?0:.2},className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-nebula-pink"}),"Featured Pep Talks"]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>i("/pep-talks"),className:"text-muted-foreground hover:text-foreground",children:"View all"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-40 rounded-2xl"}),e.jsx(j,{className:"h-40 rounded-2xl"}),e.jsx(j,{className:"h-40 rounded-2xl"})]}):b?.map((x,y)=>e.jsx(ve,{pepTalk:x,index:y},x.id))})]})]},"search-discover")})]}),e.jsx(ke,{open:m,onClose:t})]})]})};export{Qe as default};
