import{j as e,m as i,J as f,aP as g,K as p,b$ as M,aQ as $,q as z,X as q,aR as Q,c9 as D,cG as H,cl as K,ab as R,n as A,o as U,aO as Y,ax as G,cF as O,r as h,bl as V,aw as C,l as W}from"./vendor-DK8VKJIv.js";import{K as j,s as B,B as k,aj as X,f as y,J as I,aS as Z}from"./index-vNUnYBjj.js";import{o as J}from"./date-vendor-BRrA_NVo.js";import{u as ee}from"./useFirstTimeModal-CJe3iQV7.js";import"./three-vendor-qI8GXUTd.js";const T={treasure_hunt:"from-amber-500/30 to-yellow-500/30 border-amber-500/40",mystery:"from-purple-500/30 to-indigo-500/30 border-purple-500/40",pilgrimage:"from-cyan-500/30 to-teal-500/30 border-cyan-500/40",heroes_journey:"from-red-500/30 to-orange-500/30 border-red-500/40",rescue_mission:"from-pink-500/30 to-rose-500/30 border-pink-500/40",exploration:"from-emerald-500/30 to-green-500/30 border-emerald-500/40"},te={treasure_hunt:"ðŸ—ºï¸",mystery:"ðŸ”®",pilgrimage:"ðŸ§­",heroes_journey:"âš”ï¸",rescue_mission:"ðŸ’–",exploration:"ðŸ”ï¸"},E={25:"from-blue-500/20 to-cyan-500/20 border-blue-500/30",50:"from-purple-500/20 to-pink-500/20 border-purple-500/30",75:"from-orange-500/20 to-yellow-500/20 border-orange-500/30",100:"from-yellow-400/20 to-amber-500/20 border-yellow-500/30"},se=({postcard:t,onClick:m})=>{const r="story_type_slug"in t?t.story_type_slug:void 0,n=!!(t.chapter_title||t.story_content),l=t.is_finale,c=l?"from-yellow-500/40 to-amber-600/40 border-yellow-400/60":r?T[r]||T.heroes_journey:E[t.milestone_percent]||E[25],u=r?te[r]:null;return e.jsxs(i.button,{onClick:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:j("relative w-full aspect-[4/3] rounded-xl overflow-hidden","bg-gradient-to-br border",c,"group cursor-pointer",l&&"ring-2 ring-yellow-400/50 shadow-lg shadow-yellow-500/20"),children:[e.jsx("img",{src:t.image_url,alt:t.location_name,className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:j("absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent",l&&"from-black/90 via-yellow-900/20 to-transparent")}),e.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-center justify-between",children:[l?e.jsxs("div",{className:"px-2 py-0.5 rounded-full bg-yellow-500/80 backdrop-blur-sm flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3 text-yellow-900"}),e.jsx("span",{className:"text-[10px] font-bold text-yellow-900",children:"FINALE"})]}):t.chapter_number?e.jsxs("div",{className:"px-2 py-0.5 rounded-full bg-black/50 backdrop-blur-sm flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3 text-primary"}),e.jsxs("span",{className:"text-[10px] font-medium text-white",children:["Ch. ",t.chapter_number]})]}):null,e.jsxs("div",{className:"px-2 py-0.5 rounded-full bg-black/50 backdrop-blur-sm flex items-center gap-1 ml-auto",children:[u?e.jsx("span",{className:"text-xs",children:u}):e.jsx(p,{className:"w-3 h-3 text-yellow-400"}),e.jsxs("span",{className:"text-xs font-bold text-white",children:[t.milestone_percent,"%"]})]})]}),n&&!l&&e.jsx("div",{className:"absolute top-2 left-2 w-2 h-2 rounded-full bg-primary animate-pulse"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[t.chapter_title&&e.jsx("h4",{className:j("text-xs font-semibold text-white mb-0.5 line-clamp-1",l&&"text-yellow-200"),children:t.chapter_title}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(M,{className:j("w-3 h-3",l?"text-yellow-400":"text-primary")}),e.jsx("span",{className:"text-xs font-medium text-white truncate",children:t.location_name})]}),e.jsxs("div",{className:"flex items-center gap-1 text-white/60",children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{className:"text-[10px]",children:J(new Date(t.generated_at),"MMM d, yyyy")})]})]}),l&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-yellow-500/10 via-transparent to-yellow-500/5 pointer-events-none"}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-tr from-white/0 via-white/10 to-white/0"})]})},ae=t=>{const{data:m,isLoading:r}=z({queryKey:["narrative-epic",t],queryFn:async()=>{if(!t)return null;const{data:n,error:l}=await B.from("epics").select("*").eq("id",t).maybeSingle();if(l)throw console.error("Error fetching narrative epic:",l),l;return n?{...n,story_seed:n.story_seed}:null},enabled:!!t});return{epic:m,isLoading:r}},ie=({postcard:t,onClose:m})=>{const r=!!(t.chapter_title||t.story_content||t.clue_text||t.prophecy_line),n=t.is_finale,{epic:l}=ae(n&&t.epic_id||void 0),c=l?.story_seed,u=async()=>{const d=t.chapter_title?`ðŸ“– Chapter ${t.chapter_number}: "${t.chapter_title}" - ${t.location_name} âœ¨ #Cosmiq`:`ðŸ“¸ My companion visited ${t.location_name}! âœ¨ #Cosmiq`;if(U.isNativePlatform())try{await Y.share({title:t.chapter_title||`Cosmic Postcard - ${t.location_name}`,text:d,url:t.image_url,dialogTitle:"Share your cosmic postcard"})}catch(x){console.error("Share failed:",x)}else if(navigator.share)try{await navigator.share({title:t.chapter_title||`Cosmic Postcard - ${t.location_name}`,text:d,url:t.image_url})}catch(x){console.error("Share failed:",x)}else await navigator.clipboard.writeText(`${d}
${t.image_url}`),G.success("Copied to clipboard!")};return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col",onClick:m,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 safe-area-top",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:m,className:"text-white hover:bg-white/10",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsx(k,{variant:"ghost",size:"icon",onClick:d=>{d.stopPropagation(),u()},className:"text-white hover:bg-white/10",children:e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsx(X,{className:"flex-1",onClick:d=>d.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col items-center p-4 pb-8",children:[t.chapter_title&&e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center mb-4",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 text-primary mb-1",children:n?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium text-yellow-400",children:"Finale"})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Chapter ",t.chapter_number]})]})}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t.chapter_title})]}),e.jsxs(i.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"relative w-full max-w-md",children:[e.jsxs("div",{className:`relative rounded-2xl overflow-hidden shadow-2xl border-4 ${n?"border-yellow-400/40":"border-white/20"}`,children:[e.jsx("img",{src:t.image_url,alt:t.location_name,className:"w-full aspect-[4/3] object-cover"}),e.jsxs("div",{className:"absolute top-4 right-4 px-3 py-1 rounded-full bg-black/60 backdrop-blur-sm flex items-center gap-1.5",children:[e.jsx(p,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[t.milestone_percent,"%"]})]}),n&&e.jsxs("div",{className:"absolute top-4 left-4 px-3 py-1 rounded-full bg-yellow-500/80 backdrop-blur-sm flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4 text-yellow-900"}),e.jsx("span",{className:"text-sm font-bold text-yellow-900",children:"FINALE"})]})]}),e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mt-4 p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(M,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:t.location_name}),e.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:t.location_description})]})]})}),t.story_content&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:e.jsxs(y,{className:"mt-4 p-4 bg-white/5 border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(g,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Story"})]}),e.jsx("p",{className:"text-sm text-white/80 leading-relaxed whitespace-pre-wrap",children:t.story_content})]})}),t.clue_text&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:e.jsxs(y,{className:"mt-4 p-4 bg-purple-500/10 border-purple-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-300",children:"Mystery Clue"})]}),e.jsxs("p",{className:"text-sm text-white/80 italic",children:['"',t.clue_text,'"']})]})}),t.prophecy_line&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:e.jsxs(y,{className:"mt-4 p-4 bg-amber-500/10 border-amber-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(H,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-sm font-medium text-amber-300",children:"Prophecy Fragment"})]}),e.jsxs("p",{className:"text-sm text-white/80 italic font-serif",children:['"',t.prophecy_line,'"']})]})}),t.characters_featured&&t.characters_featured.length>0&&e.jsxs(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm font-medium text-cyan-300",children:"Featured Characters"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.characters_featured.map((d,x)=>e.jsx(I,{variant:"secondary",className:"bg-cyan-500/20 text-cyan-200 border-cyan-500/30",children:d},x))})]}),n&&e.jsxs(e.Fragment,{children:[c?.finale_architecture?.boss_name&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},children:e.jsxs(y,{className:"mt-4 p-5 bg-gradient-to-br from-red-500/20 to-orange-500/20 border-red-500/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{className:"text-base font-bold text-yellow-300",children:"Victory!"})]}),e.jsxs("p",{className:"text-lg font-semibold text-white mb-2",children:[c.finale_architecture.boss_name," Defeated"]}),c.finale_architecture.boss_lore&&e.jsx("p",{className:"text-sm text-white/70 italic",children:c.finale_architecture.boss_lore})]})}),c?.finale_architecture?.the_resolution&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:e.jsxs(y,{className:"mt-4 p-5 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 border-purple-500/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(A,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-base font-bold text-purple-300",children:"Final Wisdom"})]}),e.jsx("p",{className:"text-sm text-white/90 leading-relaxed",children:c.finale_architecture.the_resolution}),c.mentor_arc?.mentor_name&&e.jsxs("p",{className:"text-xs text-purple-300/70 mt-3 text-right",children:["â€” ",c.mentor_arc.mentor_name]})]})}),c?.finale_architecture?.the_new_beginning&&e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:e.jsxs(y,{className:"mt-4 p-4 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 border-emerald-500/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium text-emerald-300",children:"A New Beginning"})]}),e.jsx("p",{className:"text-sm text-white/80 italic",children:c.finale_architecture.the_new_beginning})]})}),e.jsx(i.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-yellow-500/20 border border-yellow-500/40",children:[e.jsx(f,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-bold text-yellow-300",children:"Journey Complete"}),e.jsx(f,{className:"w-4 h-4 text-yellow-400"})]})})]}),t.caption&&!r&&e.jsxs("p",{className:"mt-4 text-sm text-white/80 italic border-l-2 border-primary/50 pl-3",children:['"',t.caption,'"']}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-white/50 text-xs",children:[e.jsx($,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Captured on ",J(new Date(t.generated_at),"MMMM d, yyyy")]})]})]})]})})]})},re=[{icon:O,title:"Letters from the Cosmos",description:"Your companion travels to mysterious places and sends you postcards!"},{icon:A,title:"Chapter Milestones",description:"Special milestones unlock new chapters of your story."},{icon:g,title:"An Unfolding Tale",description:"Each postcard reveals clues and prophecies in your journey."},{icon:p,title:"Collect & Share",description:"View your growing collection and share your favorites!"}];function le({open:t,onClose:m}){return t?e.jsx("div",{className:"fixed left-0 right-0 z-[75] px-3 pointer-events-none",style:{top:"calc(1rem + env(safe-area-inset-top, 0px))"},"data-testid":"postcards-tutorial-floating-wrapper",children:e.jsx(i.div,{role:"dialog","aria-label":"Your Companion's Journey","aria-modal":"false","aria-live":"polite",className:"pointer-events-auto mx-auto max-w-sm rounded-3xl bg-gradient-to-br from-amber-950/90 via-background/95 to-orange-950/80 backdrop-blur-2xl border border-amber-500/20 shadow-2xl shadow-amber-900/30 p-0 overflow-hidden",children:e.jsxs(i.div,{initial:{opacity:0,y:40,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",damping:25,stiffness:300},children:[e.jsx("button",{type:"button",onClick:m,"aria-label":"Hide tutorial",className:"absolute right-3 top-3 z-10 rounded-full p-1.5 text-amber-200/80 hover:text-amber-100 hover:bg-amber-500/20 transition-colors",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[{top:"1rem",right:"2rem",size:"0.5rem",delay:0},{top:"3rem",left:"3rem",size:"0.375rem",delay:1},{bottom:"5rem",right:"4rem",size:"0.5rem",delay:.5}].map((r,n)=>e.jsx(i.div,{animate:{y:[0,-10,0],opacity:[.3,.6,.3]},transition:{duration:3+n*.5,repeat:1/0,ease:"easeInOut",delay:r.delay},className:"absolute bg-amber-400 rounded-full blur-sm",style:{top:r.top,right:r.right,left:r.left,bottom:r.bottom,width:r.size,height:r.size}},n))}),e.jsxs("div",{className:"pt-8 pb-4 flex flex-col items-center relative",children:[e.jsxs(i.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1,type:"spring",damping:15},className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-amber-500/30 rounded-full blur-2xl scale-150"}),e.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-amber-500/30 to-orange-600/20 flex items-center justify-center border border-amber-500/20 shadow-lg shadow-amber-500/20",children:e.jsx(O,{className:"w-8 h-8 text-amber-400"})})]}),e.jsx(i.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"mt-5 text-xl font-semibold tracking-tight bg-gradient-to-r from-amber-300 via-orange-300 to-yellow-300 bg-clip-text text-transparent",children:"Your Companion's Journey"}),e.jsx(i.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-2 text-sm text-amber-200/60 text-center px-6 leading-relaxed",children:"Discover the magic of cosmic postcards"})]}),e.jsx("div",{className:"px-5 pb-4",children:e.jsx("div",{className:"rounded-2xl bg-amber-500/5 backdrop-blur-sm divide-y divide-amber-500/10 overflow-hidden border border-amber-500/10",children:re.map((r,n)=>{const l=r.icon;return e.jsxs(i.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.25+n*.05},className:"flex items-start gap-3 px-4 py-3.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-amber-500/20 to-orange-500/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(l,{className:"w-4 h-4 text-amber-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-amber-200/90 mb-0.5",children:r.title}),e.jsx("p",{className:"text-xs text-amber-200/50 leading-relaxed",children:r.description})]})]},n)})})}),e.jsx("div",{className:"px-5 pb-6 pt-2",children:e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(k,{onClick:m,className:"w-full h-12 rounded-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-medium text-base shadow-lg shadow-amber-500/25 transition-all duration-200 active:scale-[0.98]",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Begin My Journey"]})})})]})})}):null}const ne={treasure_hunt:"ðŸ—ºï¸",mystery:"ðŸ”®",pilgrimage:"ðŸ§­",heroes_journey:"âš”ï¸",rescue_mission:"ðŸ’–",exploration:"ðŸ”ï¸"},he=()=>{const{postcards:t,isLoading:m}=Z(),[r,n]=h.useState(null),[l,c]=h.useState("all"),{showModal:u,dismissModal:d}=ee("postcards"),[x,S]=h.useState(!1),b=h.useMemo(()=>[...new Set(t.map(a=>a.epic_id).filter(Boolean))],[t]),{data:P}=z({queryKey:["postcards-epics",b],queryFn:async()=>{if(b.length===0)return[];const{data:a,error:s}=await B.from("epics").select("id, title, book_title, story_type_slug, total_chapters, status").in("id",b);if(s)throw s;return a},enabled:b.length>0}),F=h.useMemo(()=>{const a=new Map;return P?.forEach(s=>a.set(s.id,s)),a},[P]),w=h.useMemo(()=>{const a={};return t.forEach(s=>{const o=s.epic_id||"standalone";a[o]||(a[o]={epic:s.epic_id&&F.get(s.epic_id)||null,postcards:[]}),a[o].postcards.push(s)}),Object.values(a).forEach(s=>{s.postcards.sort((o,_)=>(o.chapter_number||0)-(_.chapter_number||0))}),a},[t,F]),L=h.useMemo(()=>{if(l==="all")return w;const a={};return Object.entries(w).forEach(([s,o])=>{(l==="completed"&&o.epic?.status==="completed"||l==="active"&&o.epic?.status!=="completed"||s==="standalone")&&(a[s]=o)}),a},[w,l]),N=t.length,v=b.length;return m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(le,{open:u||x,onClose:()=>{d(),S(!1)}}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Cosmic Postcards"}),e.jsx("button",{onClick:()=>S(!0),className:"p-1 rounded-full hover:bg-muted/50 transition-colors","aria-label":"Learn about postcards",children:e.jsx(V,{className:"w-4 h-4 text-muted-foreground hover:text-primary transition-colors"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(p,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{children:[N," chapters"]}),v>0&&e.jsxs("span",{className:"text-muted-foreground/60",children:["â€¢ ",v," paths"]})]})]}),N>0&&v>0&&e.jsx("div",{className:"flex gap-2",children:["all","active","completed"].map(a=>e.jsx("button",{onClick:()=>c(a),className:j("px-3 py-1 text-xs font-medium rounded-full transition-colors",l===a?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"),children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),N===0&&e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-center py-12 px-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-primary/60"})}),e.jsx("h4",{className:"text-lg font-medium text-foreground mb-2",children:"Your Story Awaits"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-xs mx-auto mb-6",children:"As you complete Quests and progress through Campaigns, your companion's journey unfolds through cosmic postcards, each one a chapter in your adventure."}),e.jsxs("div",{className:"bg-card/50 rounded-xl p-4 border border-border/50 text-left max-w-xs mx-auto",children:[e.jsxs("h5",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-primary"}),"How to Unlock"]}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1.5",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-3 h-3 mt-0.5 text-primary"}),e.jsx("span",{children:"Open Quests and start a Campaign (or choose a Star Path)."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-3 h-3 mt-0.5 text-primary"}),e.jsx("span",{children:"Complete quests and rituals to progress your campaign."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-3 h-3 mt-0.5 text-primary"}),e.jsx("span",{children:"Reach campaign milestones to unlock story chapters."})]})]})]})]}),N>0&&e.jsx("div",{className:"space-y-6",children:Object.entries(L).map(([a,s])=>e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[s.epic&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:ne[s.epic.story_type_slug||"heroes_journey"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-foreground line-clamp-1",children:s.epic.book_title||s.epic.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.postcards.length,"/",s.epic.total_chapters||"?"," chapters"]})]})]}),s.epic.status==="completed"&&e.jsx(I,{variant:"secondary",className:"text-[10px] bg-yellow-500/20 text-yellow-300 border-yellow-500/30",children:"Complete"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.postcards.map((o,_)=>e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:_*.05},children:e.jsx(se,{postcard:o,onClick:()=>n(o)})},o.id))})]},a))}),e.jsx(W,{children:r&&e.jsx(ie,{postcard:r,onClose:()=>n(null)})})]})};export{he as CompanionPostcards};
