import{r as g,j as s,aW as C,aA as p,H as k,J as j,af as v}from"./vendor-CkzXtEGd.js";import{B as N,e as S}from"./index-B9iotTKE.js";import{a as $}from"./redirectUrl-BJoiu_Ib.js";const b=async r=>{try{return navigator.clipboard&&navigator.clipboard.writeText?(await navigator.clipboard.writeText(r),!0):f(r)}catch(e){return console.error("Clipboard API failed:",e),f(r)}},f=r=>{try{const e=document.createElement("textarea");e.value=r,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent",e.style.opacity="0",e.style.pointerEvents="none",document.body.appendChild(e),e.focus(),e.select();const t=document.execCommand("copy");return document.body.removeChild(e),t}catch(e){return console.error("Fallback copy failed:",e),!1}},E=r=>{const e=r,t=e?.name||"",o=e?.message?.toLowerCase()||"";return t==="NotAllowedError"||o.includes("permission")?"Clipboard access denied. Please check your browser settings.":o.includes("secure")||o.includes("https")?"Clipboard requires a secure connection (HTTPS).":"Failed to copy to clipboard. Please try again."},P=g.memo(({title:r,text:e,url:t,className:o=""})=>{const[n,c]=g.useState(!1),u=async()=>{if(!n){c(!0);try{const a={title:r,text:e,url:t||window.location.href},l=`${e}

${a.url}`;navigator.share?(await navigator.share(a),p.success("Shared successfully!")):await b(l)?p.success("Link copied to clipboard!"):p.error("Failed to copy to clipboard")}catch(a){console.error("Error sharing:",a);const l=a?.message?.toLowerCase()||a?.toString?.()?.toLowerCase()||"";if(!(l.includes("cancel")||l.includes("abort")||l.includes("dismissed")||a?.name==="AbortError")){const m=`${e}

${t||window.location.href}`;await b(m)?p.info("Couldn't share, but link was copied to clipboard!"):p.error(E(a))}}finally{c(!1)}}};return s.jsx(N,{variant:"outline",size:"icon",onClick:u,disabled:n,className:o,"aria-label":"Share",children:s.jsx(C,{className:`h-4 w-4 ${n?"animate-pulse":""}`})})}),H=g.memo(({id:r,title:e,category:t,topicCategories:o,description:n,quote:c,isPremium:u,onClick:a,emotionalTriggers:l,highlightedTriggers:i})=>{const m=k(),x=Array.from(new Set([t,...o||[]].filter(Boolean))),h=i&&i.length>0&&l?.some(d=>i.includes(d)),w=()=>{a?a():m(`/pep-talk/${r}`)};return s.jsxs(S,{onClick:w,className:`p-5 cursor-pointer hover:shadow-glow transition-all duration-300 bg-graphite border-2 ${h?"border-royal-gold shadow-glow":"border-steel/20"} hover:border-royal-gold rounded-lg relative`,children:[u&&s.jsx("div",{className:"absolute top-4 right-12",children:s.jsxs("span",{className:"bg-royal-gold text-obsidian text-xs font-black px-3 py-1 rounded inline-flex items-center gap-1 uppercase tracking-wide",children:[s.jsx(j,{className:"h-3 w-3"}),"Pro"]})}),s.jsx("div",{className:"absolute top-4 right-4",onClick:d=>d.stopPropagation(),children:s.jsx(P,{title:e,text:`${e} - ${n||c||""}`,url:`${$()}/pep-talk/${r}`})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${h?"bg-stardust-gold animate-pulse":"bg-stardust-gold"}`,children:s.jsx(v,{className:"h-5 w-5 text-black",fill:"currentColor"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[x.map((d,y)=>s.jsx("span",{className:"text-xs font-bold text-stardust-gold uppercase tracking-wider",children:d},y)),h&&s.jsx("span",{className:"text-xs font-bold text-stardust-gold uppercase tracking-wider animate-pulse",children:"âœ¨ Match"})]}),s.jsx("h3",{className:"font-heading text-base md:text-lg font-black text-pure-white mb-2 line-clamp-2 uppercase tracking-tight break-words",children:e}),s.jsx("p",{className:"text-sm text-steel line-clamp-2 break-words",children:n||c||""})]})]})]})});export{H as P,P as S};
