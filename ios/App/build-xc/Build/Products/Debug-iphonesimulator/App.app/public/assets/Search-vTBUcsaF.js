import{r as C,j as e,cg as F,X as U,H as M,u as _,cY as z,aS as B,am as V,K as Y,ae as G,m as d,cK as D,af as K,av as X,cc as J,dC as Z,bn as ee,b4 as se,l as ae}from"./vendor-CkzXtEGd.js";import{a as W,B as S,b as te,aa as re,ab as ie,ac as q,ad as T,al as g,e as h,F as u,s as v,u as le,av as ne,as as oe,d as ce,S as de,a8 as me}from"./index-B9iotTKE.js";import{Q as I}from"./QuoteCard-BsC5qDHx.js";import{P as H}from"./PepTalkCard-CWn3ofEo.js";import{o as P,F as A}from"./date-vendor-CuPqBTxb.js";import"./three-vendor-qI8GXUTd.js";import"./redirectUrl-BJoiu_Ib.js";const he=({onSearch:a,placeholder:l="Search...",className:c="",value:i})=>{const m=i!==void 0,[j,y]=C.useState(""),t=m?i:j,o=N=>{m||y(N),a(N)},n=()=>{m||y(""),a("")};return e.jsxs("div",{className:`relative ${c}`,children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(W,{value:t,onChange:N=>o(N.target.value),placeholder:l,className:"pl-10 pr-10 bg-background/50 border-border/50 focus:border-primary transition-colors"}),t&&e.jsx(S,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:n,"aria-label":"Clear search",children:e.jsx(U,{className:"h-4 w-4"})})]})},ue=({initialQuery:a="",searchQuery:l,hideSearchBar:c=!1,onSearchChange:i})=>{const[m,j]=C.useState(a),y=typeof l=="string",t=y?l:m,o=M(),{user:n}=te();C.useEffect(()=>{y||j(a)},[a,y]);const N=s=>{y||j(s),i?.(s)},{data:f,isLoading:x}=_({queryKey:["search-quotes",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:r}=await v.from("quotes").select("*").or(`text.ilike.%${t}%,author.ilike.%${t}%`).limit(10);if(r)throw r;return s}}),{data:p,isLoading:Q}=_({queryKey:["search-pep-talks",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:r}=await v.from("pep_talks").select("*").or(`title.ilike.%${t}%,description.ilike.%${t}%,quote.ilike.%${t}%`).limit(10);if(r)throw r;return s}}),{data:w,isLoading:$}=_({queryKey:["search-challenges",t],enabled:t.length>=2,queryFn:async()=>{const{data:s,error:r}=await v.from("challenges").select("*").or(`title.ilike.%${t}%,description.ilike.%${t}%`).limit(10);if(r)throw r;return s}}),{data:b,isLoading:L}=_({queryKey:["search-tasks",t,n?.id],queryFn:async()=>{if(!n?.id)throw new Error("User not authenticated");const{data:s,error:r}=await v.from("daily_tasks").select("*").eq("user_id",n.id).or(`task_text.ilike.%${t}%,notes.ilike.%${t}%,category.ilike.%${t}%`).order("task_date",{ascending:!1}).limit(10);if(r)throw r;return s||[]},enabled:t.length>=2&&!!n}),{data:k,isLoading:E}=_({queryKey:["search-epics",t,n?.id],queryFn:async()=>{if(!n?.id)throw new Error("User not authenticated");const{data:s,error:r}=await v.from("epics").select("id, title, description, target_days, status, epic_members(user_id)").or(`user_id.eq.${n.id},epic_members.user_id.eq.${n.id}`).or(`title.ilike.%${t}%,description.ilike.%${t}%`).order("created_at",{ascending:!1}).limit(10);if(r)throw r;return s||[]},enabled:t.length>=2&&!!n}),O=x||Q||$||L||E,R=f&&f.length>0||p&&p.length>0||w&&w.length>0||b&&b.length>0||k&&k.length>0;return e.jsxs("div",{className:"space-y-4",children:[!c&&e.jsx(he,{onSearch:N,placeholder:"Search quotes, pep talks, challenges, quests, and epics...",value:t}),t.length>=2&&e.jsxs(re,{defaultValue:"all",className:"w-full",children:[e.jsxs(ie,{className:"w-full grid grid-cols-6",children:[e.jsx(q,{value:"all",children:"All"}),e.jsx(q,{value:"quotes",children:"Quotes"}),e.jsx(q,{value:"pep-talks",children:"Pep Talks"}),e.jsx(q,{value:"challenges",children:"Challenges"}),e.jsx(q,{value:"quests",children:"Quests"}),e.jsx(q,{value:"epics",children:"Epics"})]}),e.jsx(T,{value:"all",className:"space-y-4 mt-4",children:O?e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{className:"h-32 w-full"}),e.jsx(g,{className:"h-32 w-full"})]}):R?e.jsxs("div",{className:"space-y-6",children:[p&&p.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(z,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Pep Talks"})]}),e.jsx("div",{className:"space-y-3",children:p.map(s=>e.jsx(H,{...s},s.id))})]}),f&&f.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(B,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Quotes"})]}),e.jsx("div",{className:"grid gap-3",children:f.map(s=>e.jsx(I,{quote:s},s.id))})]}),w&&w.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(V,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Challenges"})]}),e.jsx("div",{className:"space-y-3",children:w.map(s=>e.jsxs(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/challenges"),onTouchEnd:r=>{r.preventDefault(),o("/challenges")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(u,{variant:"outline",children:[s.duration_days," days"]}),s.category&&e.jsx(u,{variant:"secondary",children:s.category})]})]},s.id))})]}),k&&k.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Y,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Epics"})]}),e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsxs(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/epics"),onTouchEnd:r=>{r.preventDefault(),o("/epics")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsxs(u,{variant:"outline",children:[s.target_days," days"]}),s.status&&e.jsx(u,{variant:"secondary",className:"text-xs capitalize",children:s.status})]})]},s.id))})]}),b&&b.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(G,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Quests"}),e.jsx(u,{variant:"secondary",children:b.length})]}),e.jsx("div",{className:"space-y-3",children:b.map(s=>e.jsx(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/journeys"),onTouchEnd:r=>{r.preventDefault(),o("/journeys")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.task_text}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:P(A(s.task_date),"MMM d, yyyy")}),s.scheduled_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.scheduled_time})]}),s.estimated_duration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.estimated_duration,"min"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.is_main_quest&&e.jsx(u,{variant:"secondary",className:"text-xs",children:"Main Quest"}),s.completed&&e.jsx(u,{className:"text-xs bg-success/10 text-success",children:"Completed"})]})]})},s.id))})]})]}):e.jsx(h,{className:"p-8 text-center",children:e.jsxs("p",{className:"text-muted-foreground",children:['No results found for "',t,'"']})})}),e.jsx(T,{value:"quotes",className:"space-y-3 mt-4",children:x?e.jsx(g,{className:"h-32 w-full"}):f&&f.length>0?f.map(s=>e.jsx(I,{quote:s},s.id)):e.jsx(h,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No quotes found"})})}),e.jsx(T,{value:"pep-talks",className:"space-y-3 mt-4",children:Q?e.jsx(g,{className:"h-32 w-full"}):p&&p.length>0?p.map(s=>e.jsx(H,{...s},s.id)):e.jsx(h,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No pep talks found"})})}),e.jsx(T,{value:"challenges",className:"space-y-3 mt-4",children:$?e.jsx(g,{className:"h-32 w-full"}):w&&w.length>0?w.map(s=>e.jsxs(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/challenges"),onTouchEnd:r=>{r.preventDefault(),o("/challenges")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(u,{variant:"outline",children:[s.duration_days," days"]}),s.category&&e.jsx(u,{variant:"secondary",children:s.category})]})]},s.id)):e.jsx(h,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No challenges found"})})}),e.jsx(T,{value:"epics",className:"space-y-3 mt-4",children:E?e.jsx(g,{className:"h-32 w-full"}):k&&k.length>0?k.map(s=>e.jsxs(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/epics"),onTouchEnd:r=>{r.preventDefault(),o("/epics")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[e.jsxs(u,{variant:"outline",children:[s.target_days," days"]}),s.status&&e.jsx(u,{variant:"secondary",className:"text-xs capitalize",children:s.status})]})]},s.id)):e.jsx(h,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No epics found"})})}),e.jsx(T,{value:"quests",className:"space-y-3 mt-4",children:L?e.jsx(g,{className:"h-32 w-full"}):b&&b.length>0?b.map(s=>e.jsx(h,{className:"p-4 cursor-pointer sm:hover:border-primary/50 transition-colors select-none active:scale-[0.98]",onClick:()=>o("/journeys"),onTouchEnd:r=>{r.preventDefault(),o("/journeys")},role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.task_text}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:P(A(s.task_date),"MMM d, yyyy")}),s.scheduled_time&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:s.scheduled_time})]}),s.estimated_duration&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.estimated_duration,"min"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[s.is_main_quest&&e.jsx(u,{variant:"secondary",className:"text-xs",children:"Main Quest"}),s.completed&&e.jsx(u,{className:"text-xs bg-success/10 text-success",children:"Completed"})]})]})},s.id)):e.jsx(h,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No quests found"})})})]}),t.length>0&&t.length<2&&e.jsx(h,{className:"p-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 2 characters to search"})})]})},xe=({searchQuery:a,onSearchChange:l})=>{const c=C.useMemo(()=>Array.from({length:7},(i,m)=>({id:m,size:Math.random()*120+80,x:Math.random()*120-10,y:Math.random()*80,duration:Math.random()*10+15,delay:Math.random()*4})),[]);return e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-gradient-to-br from-[hsl(var(--deep-space))] via-[hsl(var(--royal-purple)/0.6)] to-[hsl(var(--nebula-pink)/0.6)] px-6 py-12 md:px-10 md:py-16 shadow-[0_25px_120px_rgba(88,63,172,0.3)]",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.08),_transparent)]"}),c.map(i=>e.jsx(d.div,{className:"absolute rounded-full blur-3xl opacity-70 pointer-events-none",style:{width:i.size,height:i.size,left:`${i.x}%`,top:`${i.y}%`,background:i.id%2===0?"radial-gradient(circle, rgba(255,255,255,0.4), transparent)":"radial-gradient(circle, rgba(131,105,255,0.5), transparent)"},animate:{x:[0,25,-20,0],y:[0,-35,20,0],scale:[1,1.15,.95,1],opacity:[.25,.6,.4,.25]},transition:{duration:i.duration,delay:i.delay,repeat:1/0,ease:"easeInOut"}},i.id)),e.jsx("div",{className:"relative z-10 text-center space-y-6",children:e.jsxs(d.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"relative max-w-2xl mx-auto",children:[e.jsx(d.div,{className:"absolute -inset-1 rounded-2xl bg-gradient-to-r from-[hsl(var(--celestial-blue)/0.6)] via-[hsl(var(--nebula-pink)/0.7)] to-[hsl(var(--stardust-gold)/0.6)] blur-xl opacity-70",animate:{opacity:[.5,.8,.5]},transition:{duration:3,repeat:1/0}}),e.jsxs("div",{className:"relative rounded-2xl bg-background/80 backdrop-blur-2xl border border-white/10 shadow-[0_15px_60px_rgba(0,0,0,0.35)]",children:[e.jsx(F,{className:"absolute left-5 top-1/2 -translate-y-1/2 h-5 w-5 text-white/50"}),e.jsx(W,{value:a,onChange:i=>l(i.target.value),placeholder:"Search across everything...",className:"pl-14 pr-4 py-6 text-base bg-transparent border-none focus-visible:ring-0 focus-visible:outline-none text-pure-white placeholder:text-white/50"}),e.jsx("div",{className:"absolute inset-px rounded-[1.05rem] border border-white/5 pointer-events-none"})]})]})})]})},pe=[{label:"motivation",emoji:"ðŸ”¥"},{label:"anxiety",emoji:"ðŸŒŠ"},{label:"confidence",emoji:"ðŸ’ª"},{label:"morning",emoji:"ðŸŒ…"},{label:"growth",emoji:"ðŸŒ±"},{label:"peace",emoji:"â˜®ï¸"},{label:"strength",emoji:"âš¡"},{label:"self-love",emoji:"ðŸ’œ"}],ge=({onSearch:a})=>e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},className:"mb-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 text-center",children:"Popular searches"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:pe.map((l,c)=>e.jsxs(d.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.9+c*.05},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>a(l.label),className:"px-4 py-2 rounded-full bg-card/50 border border-white/10 text-sm text-foreground hover:border-primary/50 hover:bg-primary/10 transition-all backdrop-blur-sm",children:[e.jsx("span",{className:"mr-1.5",children:l.emoji}),l.label]},l.label))})]}),je=({quote:a,index:l})=>{const[c,i]=C.useState(!1),[m,j]=C.useState(!1),{toast:y}=le(),t=async o=>{o.stopPropagation(),j(!0);try{const{data:{session:n}}=await v.auth.getSession();if(!n){y({title:"Sign in required",description:"Please sign in to save favorites",variant:"destructive"});return}c?(await v.from("favorites").delete().eq("user_id",n.user.id).eq("content_type","quote").eq("content_id",a.id),i(!1)):(await v.from("favorites").insert({user_id:n.user.id,content_type:"quote",content_id:a.id}),i(!0))}catch(n){console.error("Error toggling favorite:",n)}finally{j(!1)}};return e.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1,duration:.5},whileHover:{scale:1.01},className:"group relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-[hsl(var(--royal-purple)/0.3)] via-[hsl(var(--nebula-pink)/0.2)] to-[hsl(var(--celestial-blue)/0.3)] p-[1px]",children:e.jsx("div",{className:"absolute inset-[1px] rounded-2xl bg-card"})}),e.jsxs("div",{className:"relative p-5 rounded-2xl",children:[e.jsx(d.div,{className:"absolute -top-2 -left-2 w-10 h-10 rounded-full bg-gradient-to-br from-[hsl(var(--royal-purple))] to-[hsl(var(--nebula-pink))] flex items-center justify-center shadow-glow",animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0},children:e.jsx(D,{className:"h-4 w-4 text-pure-white"})}),e.jsxs("p",{className:"text-foreground text-base leading-relaxed italic pl-6 pr-2 mb-3",children:['"',a.text,'"']}),e.jsxs("div",{className:"flex items-center justify-between pl-6",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["â€” ",a.author||"Unknown"]}),e.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(d.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t,disabled:m,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(K,{className:`h-4 w-4 ${c?"fill-nebula-pink text-nebula-pink":"text-muted-foreground"}`})})})]})]})]})},ye=({pepTalk:a,index:l})=>{const c=M(),i=()=>{c(`/pep-talk/${a.id}`)},m=j=>{j.preventDefault(),i()};return e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.15,duration:.5},whileHover:{y:-4},whileTap:{scale:.98},onClick:i,onTouchEnd:m,role:"button",tabIndex:0,className:"group relative cursor-pointer select-none",style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-[hsl(var(--graphite))] to-[hsl(var(--charcoal))] p-5 border border-white/5",children:[e.jsx(d.div,{className:"absolute inset-0 bg-gradient-to-br from-[hsl(var(--royal-purple)/0.2)] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsx(d.div,{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-gradient-to-br from-[hsl(var(--stardust-gold))] to-[hsl(var(--stardust-gold)/0.7)] flex items-center justify-center shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(X,{className:"h-4 w-4 text-obsidian ml-0.5",fill:"currentColor"})}),e.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-white/10 text-xs text-stardust-gold uppercase tracking-wider mb-3",children:[e.jsx(K,{className:"h-3 w-3",fill:"currentColor"}),a.category]}),e.jsx("h3",{className:"text-lg font-bold text-pure-white mb-2 line-clamp-2 group-hover:text-stardust-gold transition-colors",children:a.title}),a.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:"3-5 min listen"})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-tl from-[hsl(var(--royal-purple)/0.1)] to-transparent rounded-tl-full"})]})})},fe=[{icon:Z,text:"Search for quests, quotes, and pep talks"},{icon:D,text:"Browse featured quotes for daily inspiration"},{icon:ee,text:"Discover pep talks from your mentor"}];function ve({open:a,onClose:l}){return e.jsx(ne,{open:a,onClose:l,icon:F,title:"Discover & Explore",subtitle:"Your discovery hub for content, quotes, and pep talks to fuel your journey.",features:fe,footerHint:"Start typing to search or explore featured content!",buttonText:"Continue"})}const Te=()=>{const a=se(),l=M(),[c,i]=C.useState(""),m=c.trim(),j=m.length>=2,{showModal:y,dismissModal:t}=oe("search"),{data:o,isLoading:n}=_({queryKey:["featured-quotes"],queryFn:async()=>{const{data:x}=await v.from("quotes").select("id, text, author").order("created_at",{ascending:!1}).limit(4);return x||[]}}),{data:N,isLoading:f}=_({queryKey:["featured-pep-talks"],queryFn:async()=>{const{data:x}=await v.from("pep_talks").select("id, title, category, description").order("created_at",{ascending:!1}).limit(3);return x||[]}});return e.jsxs(ce,{children:[e.jsx(de,{}),e.jsxs("div",{className:"relative min-h-screen pb-nav-safe pt-safe",children:[e.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-8 space-y-10",children:[e.jsx(xe,{searchQuery:c,onSearchChange:i}),e.jsx(ae,{mode:"wait",children:j?e.jsx(d.div,{initial:a?!1:{opacity:0,y:12},animate:{opacity:1,y:0},exit:a?{opacity:0}:{opacity:0,y:-8},transition:{duration:a?0:.24,ease:"easeOut"},children:e.jsx(ue,{searchQuery:m,hideSearchBar:!0})},"search-results"):e.jsxs(d.div,{initial:a?!1:{opacity:0,y:8},animate:{opacity:1,y:0},exit:a?{opacity:0}:{opacity:0,y:-6},transition:{duration:a?0:.24},className:"space-y-12",children:[e.jsx(ge,{onSearch:i}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(d.h2,{initial:a?!1:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:a?0:.2},className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-royal-purple"}),"Featured Quotes"]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>l("/library"),className:"text-muted-foreground hover:text-foreground",children:"View all"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-32 rounded-2xl"}),e.jsx(g,{className:"h-32 rounded-2xl"})]}):o?.map((x,p)=>e.jsx(je,{quote:x,index:p},x.id))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(d.h2,{initial:a?!1:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:a?0:.2},className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-nebula-pink"}),"Featured Pep Talks"]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>l("/pep-talks"),className:"text-muted-foreground hover:text-foreground",children:"View all"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:f?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-40 rounded-2xl"}),e.jsx(g,{className:"h-40 rounded-2xl"}),e.jsx(g,{className:"h-40 rounded-2xl"})]}):N?.map((x,p)=>e.jsx(ye,{pepTalk:x,index:p},x.id))})]})]},"search-discover")})]}),e.jsx(me,{}),e.jsx(ve,{open:y,onClose:t})]})]})};export{Te as default};
