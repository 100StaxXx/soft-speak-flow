import{j as e,m as x,H as S,u as _,r as i}from"./vendor-FfY6MM0Z.js";import{ao as s,c as E,u as M,s as l}from"./index-sX_cJ3I4.js";import{M as q}from"./MentorGrid-BGn289sO.js";import"./date-vendor-Bk4KiHsJ.js";import"./three-vendor-qI8GXUTd.js";const k=()=>e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-screen bg-obsidian py-16 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-16",children:[e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(s,{className:"h-1 w-24 mx-auto bg-royal-gold/30"}),e.jsx(s,{className:"h-16 w-80 mx-auto"}),e.jsx(s,{className:"h-7 w-64 mx-auto"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"rounded-2xl border border-border/30 p-6 space-y-4 bg-muted/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(s,{className:"h-16 w-16 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(s,{className:"h-6 w-32"}),e.jsx(s,{className:"h-4 w-24"})]})]}),e.jsx(s,{className:"h-4 w-full"}),e.jsx(s,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{className:"h-6 w-16 rounded-full"}),e.jsx(s,{className:"h-6 w-20 rounded-full"})]})]},t))})]})}),Y=()=>{const{user:t}=E(),c=S(),d=_(),{toast:n}=M(),[p,f]=i.useState([]),[g,h]=i.useState(!0),[y,m]=i.useState(!1),[j,w]=i.useState(null),b=async()=>{try{const{data:r,error:a}=await l.from("mentors").select("*").eq("is_active",!0).order("created_at");if(a)throw a;if(f(r||[]),t){const{data:o}=await l.from("profiles").select("selected_mentor_id").eq("id",t.id).maybeSingle();o?.selected_mentor_id&&w(o.selected_mentor_id)}}catch(r){console.error("Error loading mentors:",r),n({title:"Error loading mentors",description:r instanceof Error?r.message:"Failed to load mentors",variant:"destructive"})}finally{h(!1)}};i.useEffect(()=>{b()},[t?.id]);const N=async r=>{if(!t){n({title:"Please log in",description:"You need to be logged in to select a mentor",variant:"destructive"}),c("/auth");return}try{m(!0);const{data:a,error:o}=await l.from("profiles").select("onboarding_data").eq("id",t.id).maybeSingle();if(o)throw o;const v=a?.onboarding_data&&typeof a.onboarding_data=="object"&&!Array.isArray(a.onboarding_data)?a.onboarding_data:{},{error:u}=await l.from("profiles").update({selected_mentor_id:r,onboarding_data:{...v,mentorId:r},updated_at:new Date().toISOString()}).eq("id",t.id);if(u)throw u;await d.invalidateQueries({queryKey:["profile",t.id]}),await d.refetchQueries({queryKey:["profile",t.id]}),n({title:"Mentor Selected!",description:"Your mentor has been updated successfully"}),c("/mentor",{replace:!0})}catch(a){console.error("Error selecting mentor:",a),n({title:"Error selecting mentor",description:a instanceof Error?a.message:"Failed to select mentor",variant:"destructive"})}finally{m(!1)}};return g?e.jsx(k,{}):e.jsx("div",{className:"min-h-screen pb-nav-safe bg-obsidian py-16 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-16",children:[e.jsxs("div",{className:"text-center space-y-6 animate-fade-in",children:[e.jsx("div",{className:"h-1 w-24 bg-royal-gold mx-auto animate-scale-in"}),e.jsx("h1",{className:"text-5xl md:text-7xl font-black text-pure-white uppercase tracking-tight",children:"Choose Your Mentor"}),e.jsx("p",{className:"text-xl md:text-2xl text-steel max-w-2xl mx-auto",children:"Pick the voice you want guiding you."})]}),e.jsx(q,{mentors:p,onSelectMentor:N,currentMentorId:j,isSelecting:y})]})})};export{Y as default};
